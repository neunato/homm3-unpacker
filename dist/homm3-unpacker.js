!function(t){"use strict";class e{constructor(t,e=0,a){if(t.buffer&&({buffer:t}=t),"number"==typeof t&&(t=new ArrayBuffer(t)),!(t instanceof ArrayBuffer))throw new Error("ArrayBuffer/Buffer/DataView expected.");(!a||e+a>t.byteLength)&&(a=t.byteLength-e),this.buffer=t,this.view=new DataView(t,e,a),this.at=0,this.length=a}uint32(){const t=this.view.getUint32(this.at,!0);return this.at+=4,t}uint16(){const t=this.view.getUint16(this.at,!0);return this.at+=2,t}uint8(){return this.view.getUint8(this.at++)}string(t=1){let e="";for(let a=0;a<t;a++)e+=String.fromCharCode(this.view.getUint8(this.at++));return e}skip(t=1){this.at+=t}seek(t){this.at=t}loop(t,e){if("function"!=typeof e)return Array(t).fill(e);const a=[];for(let n=0;n<t;n++)a.push(e.call(this,n));return a}setbuffer(...t){for(const a of t){const t=new e(a);for(let e=0;e<a.byteLength;e++)this.view.setUint8(this.at++,t.uint8())}}setstring(...t){for(const e of t)for(let t=0;t<e.length;t++)this.view.setUint8(this.at++,e.charCodeAt(t))}setuint8(...t){for(const e of t)this.view.setUint8(this.at++,e)}setuint16(...t){for(const e of t)this.view.setUint16(this.at,e,!0),this.at+=2}setuint32(...t){for(const e of t)this.view.setUint32(this.at,e,!0),this.at+=4}}var a=e;const n={1:"h3m",2:"txt",16:"pcx (indexed)",17:"pcx (bgr)",64:"def (spell)",65:"def (spritedef)",66:"def (creature)",67:"def (adventure object)",68:"def (adventure hero)",69:"def (terrain)",70:"def (cursor)",71:"def (interface)",72:"def (sprite frame)",73:"def (combat hero)",79:"msk",80:"fnt",96:"pal",200:"lod (vanilla)",500:"lod (expansion)"},i={"def (creature)":{0:"moving",1:"mouse over",2:"standing",3:"getting hit",4:"defend",5:"death",6:"???",7:"turn left",8:"turn right",9:"turn left",10:"turn right",11:"attack up",12:"attack straight",13:"attack down",14:"shoot up",15:"shoot straight",16:"shoot down",17:"hex attack up",18:"hex attack straight",19:"hex attack down",20:"start moving",21:"stop moving"},"def (adventure hero)":{0:"turn north",1:"turn northeast",2:"turn east",3:"turn southeast",4:"turn south",5:"move north",6:"move northeast",7:"move east",8:"move southeast",9:"move south"},"def (combat hero)":{0:"standing",1:"standing",2:"failure",3:"success",4:"spellcasting"}};var r={defineFileType:function(t){const e=n[t];if(!e)throw new Error("Unknown file type.");return e},defineDEFGroup:function(t,e){if(!i[t]){if(0===e)return"all";throw new Error("Unknown animation type.")}const a=i[t][e];if(!a)throw new Error("Unknown animation type.");return a}};
/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */function s(t){let e=t.length;for(;--e>=0;)t[e]=0}const o=256,l=286,h=30,d=15,f=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=new Array(576);s(g);const w=new Array(60);s(w);const b=new Array(512);s(b);const p=new Array(256);s(p);const m=new Array(29);s(m);const v=new Array(h);function k(t,e,a,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let y,x,z;function A(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}s(v);const E=t=>t<256?b[t]:b[256+(t>>>7)],U=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},S=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,U(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},R=(t,e,a)=>{S(t,a[2*e],a[2*e+1])},Z=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},B=(t,e,a)=>{const n=new Array(16);let i,r,s=0;for(i=1;i<=d;i++)n[i]=s=s+a[i-1]<<1;for(r=0;r<=e;r++){let e=t[2*r+1];0!==e&&(t[2*r]=Z(n[e]++,e))}},D=t=>{let e;for(e=0;e<l;e++)t.dyn_ltree[2*e]=0;for(e=0;e<h;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},I=t=>{t.bi_valid>8?U(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},T=(t,e,a,n)=>{const i=2*e,r=2*a;return t[i]<t[r]||t[i]===t[r]&&n[e]<=n[a]},N=(t,e,a)=>{const n=t.heap[a];let i=a<<1;for(;i<=t.heap_len&&(i<t.heap_len&&T(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!T(e,n,t.heap[i],t.depth));)t.heap[a]=t.heap[i],a=i,i<<=1;t.heap[a]=n},L=(t,e,a)=>{let n,i,r,s,l=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===n?R(t,i,e):(r=p[i],R(t,r+o+1,e),s=f[r],0!==s&&(i-=m[r],S(t,i,s)),n--,r=E(n),R(t,r,a),s=_[r],0!==s&&(n-=v[r],S(t,n,s)))}while(l<t.last_lit);R(t,256,e)},O=(t,e)=>{const a=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,r=e.stat_desc.elems;let s,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<r;s++)0!==a[2*s]?(t.heap[++t.heap_len]=h=s,t.depth[s]=0):a[2*s+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,a[2*l]=1,t.depth[l]=0,t.opt_len--,i&&(t.static_len-=n[2*l+1]);for(e.max_code=h,s=t.heap_len>>1;s>=1;s--)N(t,a,s);l=r;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],N(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,a[2*l]=a[2*s]+a[2*o],t.depth[l]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,a[2*s+1]=a[2*o+1]=l,t.heap[1]=l++,N(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const a=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,r=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,f,_,u,c,g,w=0;for(u=0;u<=d;u++)t.bl_count[u]=0;for(a[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)f=t.heap[h],u=a[2*a[2*f+1]+1]+1,u>l&&(u=l,w++),a[2*f+1]=u,f>n||(t.bl_count[u]++,c=0,f>=o&&(c=s[f-o]),g=a[2*f],t.opt_len+=g*(u+c),r&&(t.static_len+=g*(i[2*f+1]+c)));if(0!==w){do{for(u=l-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[l]--,w-=2}while(w>0);for(u=l;0!==u;u--)for(f=t.bl_count[u];0!==f;)_=t.heap[--h],_>n||(a[2*_+1]!==u&&(t.opt_len+=(u-a[2*_+1])*a[2*_],a[2*_+1]=u),f--)}})(t,e),B(a,h,t.bl_count)},C=(t,e,a)=>{let n,i,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)i=s,s=e[2*(n+1)+1],++o<l&&i===s||(o<h?t.bl_tree[2*i]+=o:0!==i?(i!==r&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,r=i,0===s?(l=138,h=3):i===s?(l=6,h=3):(l=7,h=4))},F=(t,e,a)=>{let n,i,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),n=0;n<=a;n++)if(i=s,s=e[2*(n+1)+1],!(++o<l&&i===s)){if(o<h)do{R(t,i,t.bl_tree)}while(0!=--o);else 0!==i?(i!==r&&(R(t,i,t.bl_tree),o--),R(t,16,t.bl_tree),S(t,o-3,2)):o<=10?(R(t,17,t.bl_tree),S(t,o-3,3)):(R(t,18,t.bl_tree),S(t,o-11,7));o=0,r=i,0===s?(l=138,h=3):i===s?(l=6,h=3):(l=7,h=4)}};let M=!1;const H=(t,e,a,n)=>{S(t,0+(n?1:0),3),((t,e,a,n)=>{I(t),n&&(U(t,a),U(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a})(t,e,a,!0)};var P=t=>{M||((()=>{let t,e,a,n,i;const r=new Array(16);for(a=0,n=0;n<28;n++)for(m[n]=a,t=0;t<1<<f[n];t++)p[a++]=n;for(p[a-1]=n,i=0,n=0;n<16;n++)for(v[n]=i,t=0;t<1<<_[n];t++)b[i++]=n;for(i>>=7;n<h;n++)for(v[n]=i<<7,t=0;t<1<<_[n]-7;t++)b[256+i++]=n;for(e=0;e<=d;e++)r[e]=0;for(t=0;t<=143;)g[2*t+1]=8,t++,r[8]++;for(;t<=255;)g[2*t+1]=9,t++,r[9]++;for(;t<=279;)g[2*t+1]=7,t++,r[7]++;for(;t<=287;)g[2*t+1]=8,t++,r[8]++;for(B(g,287,r),t=0;t<h;t++)w[2*t+1]=5,w[2*t]=Z(t,5);y=new k(g,f,257,l,d),x=new k(w,_,0,h,d),z=new k(new Array(0),u,0,19,7)})(),M=!0),t.l_desc=new A(t.dyn_ltree,y),t.d_desc=new A(t.dyn_dtree,x),t.bl_desc=new A(t.bl_tree,z),t.bi_buf=0,t.bi_valid=0,D(t)},j=(t,e,a,n)=>{let i,r,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),O(t,t.l_desc),O(t,t.d_desc),s=(t=>{let e;for(C(t,t.dyn_ltree,t.l_desc.max_code),C(t,t.dyn_dtree,t.d_desc.max_code),O(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*c[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=i&&(i=r)):i=r=a+5,a+4<=i&&-1!==e?H(t,e,a,n):4===t.strategy||r===i?(S(t,2+(n?1:0),3),L(t,g,w)):(S(t,4+(n?1:0),3),((t,e,a,n)=>{let i;for(S(t,e-257,5),S(t,a-1,5),S(t,n-4,4),i=0;i<n;i++)S(t,t.bl_tree[2*c[i]+1],3);F(t,t.dyn_ltree,e-1),F(t,t.dyn_dtree,a-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),L(t,t.dyn_ltree,t.dyn_dtree)),D(t),n&&I(t)},q={_tr_init:P,_tr_stored_block:H,_tr_flush_block:j,_tr_tally:(t,e,a)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(p[a]+o+1)]++,t.dyn_dtree[2*E(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{S(t,2,3),R(t,256,g),(t=>{16===t.bi_valid?(U(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var K=(t,e,a,n)=>{let i=65535&t|0,r=t>>>16&65535|0,s=0;for(;0!==a;){s=a>2e3?2e3:a,a-=s;do{i=i+e[n++]|0,r=r+i|0}while(--s);i%=65521,r%=65521}return i|r<<16|0};const G=new Uint32Array((()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e})());var Y=(t,e,a,n)=>{const i=G,r=n+a;t^=-1;for(let a=n;a<r;a++)t=t>>>8^i[255&(t^e[a])];return-1^t},X={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},$={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:V,_tr_stored_block:W,_tr_flush_block:J,_tr_tally:Q,_tr_align:tt}=q,{Z_NO_FLUSH:et,Z_PARTIAL_FLUSH:at,Z_FULL_FLUSH:nt,Z_FINISH:it,Z_BLOCK:rt,Z_OK:st,Z_STREAM_END:ot,Z_STREAM_ERROR:lt,Z_DATA_ERROR:ht,Z_BUF_ERROR:dt,Z_DEFAULT_COMPRESSION:ft,Z_FILTERED:_t,Z_HUFFMAN_ONLY:ut,Z_RLE:ct,Z_FIXED:gt,Z_DEFAULT_STRATEGY:wt,Z_UNKNOWN:bt,Z_DEFLATED:pt}=$,mt=258,vt=262,kt=103,yt=113,xt=666,zt=(t,e)=>(t.msg=X[e],e),At=t=>(t<<1)-(t>4?9:0),Et=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let Ut=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask;const St=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},Rt=(t,e)=>{J(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,St(t.strm)},Zt=(t,e)=>{t.pending_buf[t.pending++]=e},Bt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Dt=(t,e,a,n)=>{let i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),a),1===t.state.wrap?t.adler=K(t.adler,e,i,a):2===t.state.wrap&&(t.adler=Y(t.adler,e,i,a)),t.next_in+=i,t.total_in+=i,i)},It=(t,e)=>{let a,n,i=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-vt?t.strstart-(t.w_size-vt):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+mt;let u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,h[a+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do{}while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(n=mt-(_-r),r=_-mt,n>s){if(t.match_start=e,s=n,n>=o)break;u=h[r+s-1],c=h[r+s]}}}while((e=f[e&d])>l&&0!=--i);return s<=t.lookahead?s:t.lookahead},Tt=t=>{const e=t.w_size;let a,n,i,r,s;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-vt)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,a=n;do{i=t.head[--a],t.head[a]=i>=e?i-e:0}while(--n);n=e,a=n;do{i=t.prev[--a],t.prev[a]=i>=e?i-e:0}while(--n);r+=e}if(0===t.strm.avail_in)break;if(n=Dt(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=Ut(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=Ut(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<vt&&0!==t.strm.avail_in)},Nt=(t,e)=>{let a,n;for(;;){if(t.lookahead<vt){if(Tt(t),t.lookahead<vt&&e===et)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=Ut(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-vt&&(t.match_length=It(t,a)),t.match_length>=3)if(n=Q(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Ut(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Ut(t,t.ins_h,t.window[t.strstart+1]);else n=Q(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Rt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===it?(Rt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Rt(t,!1),0===t.strm.avail_out)?1:2},Lt=(t,e)=>{let a,n,i;for(;;){if(t.lookahead<vt){if(Tt(t),t.lookahead<vt&&e===et)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=Ut(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-vt&&(t.match_length=It(t,a),t.match_length<=5&&(t.strategy===_t||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=Q(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=Ut(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Rt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=Q(t,0,t.window[t.strstart-1]),n&&Rt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Q(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===it?(Rt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Rt(t,!1),0===t.strm.avail_out)?1:2};function Ot(t,e,a,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=i}const Ct=[new Ot(0,0,0,0,((t,e)=>{let a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Tt(t),0===t.lookahead&&e===et)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Rt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-vt&&(Rt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===it?(Rt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Rt(t,!1),t.strm.avail_out),1)})),new Ot(4,4,8,4,Nt),new Ot(4,5,16,8,Nt),new Ot(4,6,32,32,Nt),new Ot(4,4,16,16,Lt),new Ot(8,16,32,32,Lt),new Ot(8,16,128,128,Lt),new Ot(8,32,128,256,Lt),new Ot(32,128,258,1024,Lt),new Ot(32,258,258,4096,Lt)];function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Et(this.dyn_ltree),Et(this.dyn_dtree),Et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Mt=t=>{if(!t||!t.state)return zt(t,lt);t.total_in=t.total_out=0,t.data_type=bt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:yt,t.adler=2===e.wrap?0:1,e.last_flush=et,V(e),st},Ht=t=>{const e=Mt(t);var a;return e===st&&((a=t.state).window_size=2*a.w_size,Et(a.head),a.max_lazy_match=Ct[a.level].max_lazy,a.good_match=Ct[a.level].good_length,a.nice_match=Ct[a.level].nice_length,a.max_chain_length=Ct[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),e},Pt=(t,e,a,n,i,r)=>{if(!t)return lt;let s=1;if(e===ft&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>9||a!==pt||n<8||n>15||e<0||e>9||r<0||r>gt)return zt(t,lt);8===n&&(n=9);const o=new Ft;return t.state=o,o.strm=t,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=a,Ht(t)};var jt=(t,e)=>{let a=e.length;if(!t||!t.state)return lt;const n=t.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return lt;if(1===i&&(t.adler=K(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===i&&(Et(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(a-n.w_size,a),0),e=t,a=n.w_size}const r=t.avail_in,s=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Tt(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=Ut(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,Tt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=o,t.avail_in=r,n.wrap=i,st},qt={deflateInit:(t,e)=>Pt(t,e,pt,15,8,wt),deflateInit2:Pt,deflateReset:Ht,deflateResetKeep:Mt,deflateSetHeader:(t,e)=>t&&t.state?2!==t.state.wrap?lt:(t.state.gzhead=e,st):lt,deflate:(t,e)=>{let a,n;if(!t||!t.state||e>rt||e<0)return t?zt(t,lt):lt;const i=t.state;if(!t.output||!t.input&&0!==t.avail_in||i.status===xt&&e!==it)return zt(t,0===t.avail_out?dt:lt);i.strm=t;const r=i.last_flush;if(i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,Zt(i,31),Zt(i,139),Zt(i,8),i.gzhead?(Zt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Zt(i,255&i.gzhead.time),Zt(i,i.gzhead.time>>8&255),Zt(i,i.gzhead.time>>16&255),Zt(i,i.gzhead.time>>24&255),Zt(i,9===i.level?2:i.strategy>=ut||i.level<2?4:0),Zt(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Zt(i,255&i.gzhead.extra.length),Zt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=Y(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(Zt(i,0),Zt(i,0),Zt(i,0),Zt(i,0),Zt(i,0),Zt(i,9===i.level?2:i.strategy>=ut||i.level<2?4:0),Zt(i,3),i.status=yt);else{let e=pt+(i.w_bits-8<<4)<<8,a=-1;a=i.strategy>=ut||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=a<<6,0!==i.strstart&&(e|=32),e+=31-e%31,i.status=yt,Bt(i,e),0!==i.strstart&&(Bt(i,t.adler>>>16),Bt(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=Y(t.adler,i.pending_buf,i.pending-a,a)),St(t),a=i.pending,i.pending!==i.pending_buf_size));)Zt(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=Y(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=Y(t.adler,i.pending_buf,i.pending-a,a)),St(t),a=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Zt(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>a&&(t.adler=Y(t.adler,i.pending_buf,i.pending-a,a)),0===n&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=Y(t.adler,i.pending_buf,i.pending-a,a)),St(t),a=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Zt(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>a&&(t.adler=Y(t.adler,i.pending_buf,i.pending-a,a)),0===n&&(i.status=kt)}else i.status=kt;if(i.status===kt&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&St(t),i.pending+2<=i.pending_buf_size&&(Zt(i,255&t.adler),Zt(i,t.adler>>8&255),t.adler=0,i.status=yt)):i.status=yt),0!==i.pending){if(St(t),0===t.avail_out)return i.last_flush=-1,st}else if(0===t.avail_in&&At(e)<=At(r)&&e!==it)return zt(t,dt);if(i.status===xt&&0!==t.avail_in)return zt(t,dt);if(0!==t.avail_in||0!==i.lookahead||e!==et&&i.status!==xt){let a=i.strategy===ut?((t,e)=>{let a;for(;;){if(0===t.lookahead&&(Tt(t),0===t.lookahead)){if(e===et)return 1;break}if(t.match_length=0,a=Q(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(Rt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===it?(Rt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Rt(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===ct?((t,e)=>{let a,n,i,r;const s=t.window;for(;;){if(t.lookahead<=mt){if(Tt(t),t.lookahead<=mt&&e===et)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){r=t.strstart+mt;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<r);t.match_length=mt-(r-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=Q(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=Q(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(Rt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===it?(Rt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Rt(t,!1),0===t.strm.avail_out)?1:2})(i,e):Ct[i.level].func(i,e);if(3!==a&&4!==a||(i.status=xt),1===a||3===a)return 0===t.avail_out&&(i.last_flush=-1),st;if(2===a&&(e===at?tt(i):e!==rt&&(W(i,0,0,!1),e===nt&&(Et(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),St(t),0===t.avail_out))return i.last_flush=-1,st}return e!==it?st:i.wrap<=0?ot:(2===i.wrap?(Zt(i,255&t.adler),Zt(i,t.adler>>8&255),Zt(i,t.adler>>16&255),Zt(i,t.adler>>24&255),Zt(i,255&t.total_in),Zt(i,t.total_in>>8&255),Zt(i,t.total_in>>16&255),Zt(i,t.total_in>>24&255)):(Bt(i,t.adler>>>16),Bt(i,65535&t.adler)),St(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?st:ot)},deflateEnd:t=>{if(!t||!t.state)return lt;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==kt&&e!==yt&&e!==xt?zt(t,lt):(t.state=null,e===yt?zt(t,ht):st)},deflateSetDictionary:jt,deflateInfo:"pako deflate (from Nodeca project)"};const Kt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Gt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)Kt(a,e)&&(t[e]=a[e])}}return t},Yt=t=>{let e=0;for(let a=0,n=t.length;a<n;a++)e+=t[a].length;const a=new Uint8Array(e);for(let e=0,n=0,i=t.length;e<i;e++){let i=t[e];a.set(i,n),n+=i.length}return a};let Xt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Xt=!1}const $t=new Uint8Array(256);for(let t=0;t<256;t++)$t[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;$t[254]=$t[254]=1;var Vt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,n,i,r,s=t.length,o=0;for(i=0;i<s;i++)a=t.charCodeAt(i),55296==(64512&a)&&i+1<s&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),i++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),r=0,i=0;r<o;i++)a=t.charCodeAt(i),55296==(64512&a)&&i+1<s&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),i++)),a<128?e[r++]=a:a<2048?(e[r++]=192|a>>>6,e[r++]=128|63&a):a<65536?(e[r++]=224|a>>>12,e[r++]=128|a>>>6&63,e[r++]=128|63&a):(e[r++]=240|a>>>18,e[r++]=128|a>>>12&63,e[r++]=128|a>>>6&63,e[r++]=128|63&a);return e},Wt=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,i;const r=new Array(2*a);for(i=0,n=0;n<a;){let e=t[n++];if(e<128){r[i++]=e;continue}let s=$t[e];if(s>4)r[i++]=65533,n+=s-1;else{for(e&=2===s?31:3===s?15:7;s>1&&n<a;)e=e<<6|63&t[n++],s--;s>1?r[i++]=65533:e<65536?r[i++]=e:(e-=65536,r[i++]=55296|e>>10&1023,r[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Xt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let n=0;n<e;n++)a+=String.fromCharCode(t[n]);return a})(r,i)},Jt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+$t[t[a]]>e?a:e};var Qt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const te=Object.prototype.toString,{Z_NO_FLUSH:ee,Z_SYNC_FLUSH:ae,Z_FULL_FLUSH:ne,Z_FINISH:ie,Z_OK:re,Z_STREAM_END:se,Z_DEFAULT_COMPRESSION:oe,Z_DEFAULT_STRATEGY:le,Z_DEFLATED:he}=$;function de(t){this.options=Gt({level:oe,method:he,chunkSize:16384,windowBits:15,memLevel:8,strategy:le},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qt,this.strm.avail_out=0;let a=qt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==re)throw new Error(X[a]);if(e.header&&qt.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Vt(e.dictionary):"[object ArrayBuffer]"===te.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=qt.deflateSetDictionary(this.strm,t),a!==re)throw new Error(X[a]);this._dict_set=!0}}function fe(t,e){const a=new de(e);if(a.push(t,!0),a.err)throw a.msg||X[a.err];return a.result}de.prototype.push=function(t,e){const a=this.strm,n=this.options.chunkSize;let i,r;if(this.ended)return!1;for(r=e===~~e?e:!0===e?ie:ee,"string"==typeof t?a.input=Vt(t):"[object ArrayBuffer]"===te.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(n),a.next_out=0,a.avail_out=n),(r===ae||r===ne)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(i=qt.deflate(a,r),i===se)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),i=qt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===re;if(0!==a.avail_out){if(r>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},de.prototype.onData=function(t){this.chunks.push(t)},de.prototype.onEnd=function(t){t===re&&(this.result=Yt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var _e={Deflate:de,deflate:fe,deflateRaw:function(t,e){return(e=e||{}).raw=!0,fe(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,fe(t,e)},constants:$};var ue=function(t,e){let a,n,i,r,s,o,l,h,d,f,_,u,c,g,w,b,p,m,v,k,y,x,z,A;const E=t.state;a=t.next_in,z=t.input,n=a+(t.avail_in-5),i=t.next_out,A=t.output,r=i-(e-t.avail_out),s=i+(t.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,f=E.window,_=E.hold,u=E.bits,c=E.lencode,g=E.distcode,w=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;t:do{u<15&&(_+=z[a++]<<u,u+=8,_+=z[a++]<<u,u+=8),p=c[_&w];e:for(;;){if(m=p>>>24,_>>>=m,u-=m,m=p>>>16&255,0===m)A[i++]=65535&p;else{if(!(16&m)){if(0==(64&m)){p=c[(65535&p)+(_&(1<<m)-1)];continue e}if(32&m){E.mode=12;break t}t.msg="invalid literal/length code",E.mode=30;break t}v=65535&p,m&=15,m&&(u<m&&(_+=z[a++]<<u,u+=8),v+=_&(1<<m)-1,_>>>=m,u-=m),u<15&&(_+=z[a++]<<u,u+=8,_+=z[a++]<<u,u+=8),p=g[_&b];a:for(;;){if(m=p>>>24,_>>>=m,u-=m,m=p>>>16&255,!(16&m)){if(0==(64&m)){p=g[(65535&p)+(_&(1<<m)-1)];continue a}t.msg="invalid distance code",E.mode=30;break t}if(k=65535&p,m&=15,u<m&&(_+=z[a++]<<u,u+=8,u<m&&(_+=z[a++]<<u,u+=8)),k+=_&(1<<m)-1,k>o){t.msg="invalid distance too far back",E.mode=30;break t}if(_>>>=m,u-=m,m=i-r,k>m){if(m=k-m,m>h&&E.sane){t.msg="invalid distance too far back",E.mode=30;break t}if(y=0,x=f,0===d){if(y+=l-m,m<v){v-=m;do{A[i++]=f[y++]}while(--m);y=i-k,x=A}}else if(d<m){if(y+=l+d-m,m-=d,m<v){v-=m;do{A[i++]=f[y++]}while(--m);if(y=0,d<v){m=d,v-=m;do{A[i++]=f[y++]}while(--m);y=i-k,x=A}}}else if(y+=d-m,m<v){v-=m;do{A[i++]=f[y++]}while(--m);y=i-k,x=A}for(;v>2;)A[i++]=x[y++],A[i++]=x[y++],A[i++]=x[y++],v-=3;v&&(A[i++]=x[y++],v>1&&(A[i++]=x[y++]))}else{y=i-k;do{A[i++]=A[y++],A[i++]=A[y++],A[i++]=A[y++],v-=3}while(v>2);v&&(A[i++]=A[y++],v>1&&(A[i++]=A[y++]))}break}}break}}while(a<n&&i<s);v=u>>3,a-=v,u-=v<<3,_&=(1<<u)-1,t.next_in=a,t.next_out=i,t.avail_in=a<n?n-a+5:5-(a-n),t.avail_out=i<s?s-i+257:257-(i-s),E.hold=_,E.bits=u};const ce=15,ge=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),we=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),be=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var me=(t,e,a,n,i,r,s,o)=>{const l=o.bits;let h,d,f,_,u,c,g=0,w=0,b=0,p=0,m=0,v=0,k=0,y=0,x=0,z=0,A=null,E=0;const U=new Uint16Array(16),S=new Uint16Array(16);let R,Z,B,D=null,I=0;for(g=0;g<=ce;g++)U[g]=0;for(w=0;w<n;w++)U[e[a+w]]++;for(m=l,p=ce;p>=1&&0===U[p];p--);if(m>p&&(m=p),0===p)return i[r++]=20971520,i[r++]=20971520,o.bits=1,0;for(b=1;b<p&&0===U[b];b++);for(m<b&&(m=b),y=1,g=1;g<=ce;g++)if(y<<=1,y-=U[g],y<0)return-1;if(y>0&&(0===t||1!==p))return-1;for(S[1]=0,g=1;g<ce;g++)S[g+1]=S[g]+U[g];for(w=0;w<n;w++)0!==e[a+w]&&(s[S[e[a+w]]++]=w);if(0===t?(A=D=s,c=19):1===t?(A=ge,E-=257,D=we,I-=257,c=256):(A=be,D=pe,c=-1),z=0,w=0,g=b,u=r,v=m,k=0,f=-1,x=1<<m,_=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){R=g-k,s[w]<c?(Z=0,B=s[w]):s[w]>c?(Z=D[I+s[w]],B=A[E+s[w]]):(Z=96,B=0),h=1<<g-k,d=1<<v,b=d;do{d-=h,i[u+(z>>k)+d]=R<<24|Z<<16|B|0}while(0!==d);for(h=1<<g-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,w++,0==--U[g]){if(g===p)break;g=e[a+s[w]]}if(g>m&&(z&_)!==f){for(0===k&&(k=m),u+=b,v=g-k,y=1<<v;v+k<p&&(y-=U[v+k],!(y<=0));)v++,y<<=1;if(x+=1<<v,1===t&&x>852||2===t&&x>592)return 1;f=z&_,i[f]=m<<24|v<<16|u-r|0}}return 0!==z&&(i[u+z]=g-k<<24|64<<16|0),o.bits=m,0};const{Z_FINISH:ve,Z_BLOCK:ke,Z_TREES:ye,Z_OK:xe,Z_STREAM_END:ze,Z_NEED_DICT:Ae,Z_STREAM_ERROR:Ee,Z_DATA_ERROR:Ue,Z_MEM_ERROR:Se,Z_BUF_ERROR:Re,Z_DEFLATED:Ze}=$,Be=12,De=30,Ie=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Te(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ne=t=>{if(!t||!t.state)return Ee;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,xe},Le=t=>{if(!t||!t.state)return Ee;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Ne(t)},Oe=(t,e)=>{let a;if(!t||!t.state)return Ee;const n=t.state;return e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Ee:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=a,n.wbits=e,Le(t))},Ce=(t,e)=>{if(!t)return Ee;const a=new Te;t.state=a,a.window=null;const n=Oe(t,e);return n!==xe&&(t.state=null),n};let Fe,Me,He=!0;const Pe=t=>{if(He){Fe=new Int32Array(512),Me=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(me(1,t.lens,0,288,Fe,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;me(2,t.lens,0,32,Me,0,t.work,{bits:5}),He=!1}t.lencode=Fe,t.lenbits=9,t.distcode=Me,t.distbits=5},je=(t,e,a,n)=>{let i;const r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(e.subarray(a-r.wsize,a),0),r.wnext=0,r.whave=r.wsize):(i=r.wsize-r.wnext,i>n&&(i=n),r.window.set(e.subarray(a-n,a-n+i),r.wnext),(n-=i)?(r.window.set(e.subarray(a-n,a),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=i,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=i))),0};var qe=(t,e)=>{let a,n,i,r,s,o,l,h,d,f,_,u,c,g,w,b,p,m,v,k,y,x,z=0;const A=new Uint8Array(4);let E,U;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return Ee;a=t.state,a.mode===Be&&(a.mode=13),s=t.next_out,i=t.output,l=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,h=a.hold,d=a.bits,f=o,_=l,x=xe;t:for(;;)switch(a.mode){case 1:if(0===a.wrap){a.mode=13;break}for(;d<16;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(2&a.wrap&&35615===h){a.check=0,A[0]=255&h,A[1]=h>>>8&255,a.check=Y(a.check,A,2,0),h=0,d=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=De;break}if((15&h)!==Ze){t.msg="unknown compression method",a.mode=De;break}if(h>>>=4,d-=4,y=8+(15&h),0===a.wbits)a.wbits=y;else if(y>a.wbits){t.msg="invalid window size",a.mode=De;break}a.dmax=1<<a.wbits,t.adler=a.check=1,a.mode=512&h?10:Be,h=0,d=0;break;case 2:for(;d<16;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(a.flags=h,(255&a.flags)!==Ze){t.msg="unknown compression method",a.mode=De;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=De;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&(A[0]=255&h,A[1]=h>>>8&255,a.check=Y(a.check,A,2,0)),h=0,d=0,a.mode=3;case 3:for(;d<32;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,a.check=Y(a.check,A,4,0)),h=0,d=0,a.mode=4;case 4:for(;d<16;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&(A[0]=255&h,A[1]=h>>>8&255,a.check=Y(a.check,A,2,0)),h=0,d=0,a.mode=5;case 5:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&(A[0]=255&h,A[1]=h>>>8&255,a.check=Y(a.check,A,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(u=a.length,u>o&&(u=o),u&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(n.subarray(r,r+u),y)),512&a.flags&&(a.check=Y(a.check,n,u,r)),o-=u,r+=u,a.length-=u),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===o)break t;u=0;do{y=n[r+u++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&u<o);if(512&a.flags&&(a.check=Y(a.check,n,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===o)break t;u=0;do{y=n[r+u++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&u<o);if(512&a.flags&&(a.check=Y(a.check,n,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=De;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=Be;break;case 10:for(;d<32;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}t.adler=a.check=Ie(h),h=0,d=0,a.mode=11;case 11:if(0===a.havedict)return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,Ae;t.adler=a.check=1,a.mode=Be;case Be:if(e===ke||e===ye)break t;case 13:if(a.last){h>>>=7&d,d-=7&d,a.mode=27;break}for(;d<3;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}switch(a.last=1&h,h>>>=1,d-=1,3&h){case 0:a.mode=14;break;case 1:if(Pe(a),a.mode=20,e===ye){h>>>=2,d-=2;break t}break;case 2:a.mode=17;break;case 3:t.msg="invalid block type",a.mode=De}h>>>=2,d-=2;break;case 14:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=De;break}if(a.length=65535&h,h=0,d=0,a.mode=15,e===ye)break t;case 15:a.mode=16;case 16:if(u=a.length,u){if(u>o&&(u=o),u>l&&(u=l),0===u)break t;i.set(n.subarray(r,r+u),s),o-=u,r+=u,l-=u,s+=u,a.length-=u;break}a.mode=Be;break;case 17:for(;d<14;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=De;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.lens[S[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[S[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,E={bits:a.lenbits},x=me(0,a.lens,0,19,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid code lengths set",a.mode=De;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;z=a.lencode[h&(1<<a.lenbits)-1],w=z>>>24,b=z>>>16&255,p=65535&z,!(w<=d);){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(p<16)h>>>=w,d-=w,a.lens[a.have++]=p;else{if(16===p){for(U=w+2;d<U;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(h>>>=w,d-=w,0===a.have){t.msg="invalid bit length repeat",a.mode=De;break}y=a.lens[a.have-1],u=3+(3&h),h>>>=2,d-=2}else if(17===p){for(U=w+3;d<U;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}h>>>=w,d-=w,y=0,u=3+(7&h),h>>>=3,d-=3}else{for(U=w+7;d<U;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}h>>>=w,d-=w,y=0,u=11+(127&h),h>>>=7,d-=7}if(a.have+u>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=De;break}for(;u--;)a.lens[a.have++]=y}}if(a.mode===De)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=De;break}if(a.lenbits=9,E={bits:a.lenbits},x=me(1,a.lens,0,a.nlen,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid literal/lengths set",a.mode=De;break}if(a.distbits=6,a.distcode=a.distdyn,E={bits:a.distbits},x=me(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,E),a.distbits=E.bits,x){t.msg="invalid distances set",a.mode=De;break}if(a.mode=20,e===ye)break t;case 20:a.mode=21;case 21:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,ue(t,_),s=t.next_out,i=t.output,l=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,h=a.hold,d=a.bits,a.mode===Be&&(a.back=-1);break}for(a.back=0;z=a.lencode[h&(1<<a.lenbits)-1],w=z>>>24,b=z>>>16&255,p=65535&z,!(w<=d);){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(b&&0==(240&b)){for(m=w,v=b,k=p;z=a.lencode[k+((h&(1<<m+v)-1)>>m)],w=z>>>24,b=z>>>16&255,p=65535&z,!(m+w<=d);){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}h>>>=m,d-=m,a.back+=m}if(h>>>=w,d-=w,a.back+=w,a.length=p,0===b){a.mode=26;break}if(32&b){a.back=-1,a.mode=Be;break}if(64&b){t.msg="invalid literal/length code",a.mode=De;break}a.extra=15&b,a.mode=22;case 22:if(a.extra){for(U=a.extra;d<U;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;z=a.distcode[h&(1<<a.distbits)-1],w=z>>>24,b=z>>>16&255,p=65535&z,!(w<=d);){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(0==(240&b)){for(m=w,v=b,k=p;z=a.distcode[k+((h&(1<<m+v)-1)>>m)],w=z>>>24,b=z>>>16&255,p=65535&z,!(m+w<=d);){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}h>>>=m,d-=m,a.back+=m}if(h>>>=w,d-=w,a.back+=w,64&b){t.msg="invalid distance code",a.mode=De;break}a.offset=p,a.extra=15&b,a.mode=24;case 24:if(a.extra){for(U=a.extra;d<U;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=De;break}a.mode=25;case 25:if(0===l)break t;if(u=_-l,a.offset>u){if(u=a.offset-u,u>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=De;break}u>a.wnext?(u-=a.wnext,c=a.wsize-u):c=a.wnext-u,u>a.length&&(u=a.length),g=a.window}else g=i,c=s-a.offset,u=a.length;u>l&&(u=l),l-=u,a.length-=u;do{i[s++]=g[c++]}while(--u);0===a.length&&(a.mode=21);break;case 26:if(0===l)break t;i[s++]=a.length,l--,a.mode=21;break;case 27:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=n[r++]<<d,d+=8}if(_-=l,t.total_out+=_,a.total+=_,_&&(t.adler=a.check=a.flags?Y(a.check,i,_,s-_):K(a.check,i,_,s-_)),_=l,(a.flags?h:Ie(h))!==a.check){t.msg="incorrect data check",a.mode=De;break}h=0,d=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=De;break}h=0,d=0}a.mode=29;case 29:x=ze;break t;case De:x=Ue;break t;case 31:return Se;default:return Ee}return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||_!==t.avail_out&&a.mode<De&&(a.mode<27||e!==ve))&&je(t,t.output,t.next_out,_-t.avail_out),f-=t.avail_in,_-=t.avail_out,t.total_in+=f,t.total_out+=_,a.total+=_,a.wrap&&_&&(t.adler=a.check=a.flags?Y(a.check,i,_,t.next_out-_):K(a.check,i,_,t.next_out-_)),t.data_type=a.bits+(a.last?64:0)+(a.mode===Be?128:0)+(20===a.mode||15===a.mode?256:0),(0===f&&0===_||e===ve)&&x===xe&&(x=Re),x},Ke={inflateReset:Le,inflateReset2:Oe,inflateResetKeep:Ne,inflateInit:t=>Ce(t,15),inflateInit2:Ce,inflate:qe,inflateEnd:t=>{if(!t||!t.state)return Ee;let e=t.state;return e.window&&(e.window=null),t.state=null,xe},inflateGetHeader:(t,e)=>{if(!t||!t.state)return Ee;const a=t.state;return 0==(2&a.wrap)?Ee:(a.head=e,e.done=!1,xe)},inflateSetDictionary:(t,e)=>{const a=e.length;let n,i,r;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?Ee:11===n.mode&&(i=1,i=K(i,e,a,0),i!==n.check)?Ue:(r=je(t,e,a,a),r?(n.mode=31,Se):(n.havedict=1,xe))):Ee},inflateInfo:"pako inflate (from Nodeca project)"};var Ge=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ye=Object.prototype.toString,{Z_NO_FLUSH:Xe,Z_FINISH:$e,Z_OK:Ve,Z_STREAM_END:We,Z_NEED_DICT:Je,Z_STREAM_ERROR:Qe,Z_DATA_ERROR:ta,Z_MEM_ERROR:ea}=$;function aa(t){this.options=Gt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qt,this.strm.avail_out=0;let a=Ke.inflateInit2(this.strm,e.windowBits);if(a!==Ve)throw new Error(X[a]);if(this.header=new Ge,Ke.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Vt(e.dictionary):"[object ArrayBuffer]"===Ye.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=Ke.inflateSetDictionary(this.strm,e.dictionary),a!==Ve)))throw new Error(X[a])}function na(t,e){const a=new aa(e);if(a.push(t),a.err)throw a.msg||X[a.err];return a.result}aa.prototype.push=function(t,e){const a=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let r,s,o;if(this.ended)return!1;for(s=e===~~e?e:!0===e?$e:Xe,"[object ArrayBuffer]"===Ye.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(n),a.next_out=0,a.avail_out=n),r=Ke.inflate(a,s),r===Je&&i&&(r=Ke.inflateSetDictionary(a,i),r===Ve?r=Ke.inflate(a,s):r===ta&&(r=Je));a.avail_in>0&&r===We&&a.state.wrap>0&&0!==t[a.next_in];)Ke.inflateReset(a),r=Ke.inflate(a,s);switch(r){case Qe:case ta:case Je:case ea:return this.onEnd(r),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||r===We))if("string"===this.options.to){let t=Jt(a.output,a.next_out),e=a.next_out-t,i=Wt(a.output,t);a.next_out=e,a.avail_out=n-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(i)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(r!==Ve||0!==o){if(r===We)return r=Ke.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},aa.prototype.onData=function(t){this.chunks.push(t)},aa.prototype.onEnd=function(t){t===Ve&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Yt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ia={Inflate:aa,inflate:na,inflateRaw:function(t,e){return(e=e||{}).raw=!0,na(t,e)},ungzip:na,constants:$};const{Deflate:ra,deflate:sa,deflateRaw:oa,gzip:la}=_e,{Inflate:ha,inflate:da,inflateRaw:fa,ungzip:_a}=ia;var ua=ra,ca=sa,ga=oa,wa=la,ba=ha,pa=da,ma=fa,va=_a,ka=$,ya={Deflate:ua,deflate:ca,deflateRaw:ga,gzip:wa,Inflate:ba,inflate:pa,inflateRaw:ma,ungzip:va,constants:ka};function xa(t,e){return t(e={exports:{}},e.exports),e.exports}var za,Aa=(za=Object.freeze({__proto__:null,Deflate:ua,Inflate:ba,constants:ka,default:ya,deflate:ca,deflateRaw:ga,gzip:wa,inflate:pa,inflateRaw:ma,ungzip:va}))&&za.default||za;const{defineFileType:Ea}=r;var Ua=function(t,e=(t=>t)){if(t instanceof a||(t=new a(t)),"object"==typeof e){const t=Object.keys(e);if(!t.every((t=>"function"==typeof e[t])))throw new Error("Invalid processor given.");const a=t.map((t=>{return{regex:new RegExp(`.${a=t,a.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}$`,"i"),processor:e[t]};var a}));e=function(t,e,n){for(const i of a)if(i.regex.test(e))return i.processor(t,e,n);return t}}if("function"!=typeof e)throw new Error("Invalid processor given.");if(4476748!==t.uint32())throw new Error("Not a LOD file.");const n=Ea(t.uint32()),i=t.uint32();if(i>1e4)throw new Error("File limit exceeded.");t.skip(80);const r={};let s;function o(){s=!1}for(let a=0;a<i;a++){const a=t.string(16).replace(/\0.*$/,""),n=t.uint32(),i=t.uint32();t.uint32();const l=t.uint32();let h;h=0===l?t.buffer.slice(n,n+i):Aa.inflate(new Uint8Array(t.buffer,n,l)).buffer,s=!0;const d=e(h,a,o);s&&(r[a]=d)}return{type:n,files:r}},Sa=xa((function(t,e){var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var i in a)n(a,i)&&(t[i]=a[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,a,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(a,a+n),i);else for(var r=0;r<n;r++)t[i+r]=e[a+r]},flattenChunks:function(t){var e,a,n,i,r,s;for(n=0,e=0,a=t.length;e<a;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,a=t.length;e<a;e++)r=t[e],s.set(r,i),i+=r.length;return s}},r={arraySet:function(t,e,a,n,i){for(var r=0;r<n;r++)t[i+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,r))},e.setTyped(a)}));Sa.assign,Sa.shrinkBuf,Sa.setTyped,Sa.Buf8,Sa.Buf16,Sa.Buf32;function Ra(t){for(var e=t.length;--e>=0;)t[e]=0}var Za=256,Ba=286,Da=30,Ia=15,Ta=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Na=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],La=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Oa=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ca=new Array(576);Ra(Ca);var Fa=new Array(60);Ra(Fa);var Ma=new Array(512);Ra(Ma);var Ha=new Array(256);Ra(Ha);var Pa=new Array(29);Ra(Pa);var ja,qa,Ka,Ga=new Array(Da);function Ya(t,e,a,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function Xa(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function $a(t){return t<256?Ma[t]:Ma[256+(t>>>7)]}function Va(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function Wa(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,Va(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function Ja(t,e,a){Wa(t,a[2*e],a[2*e+1])}function Qa(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1}function tn(t,e,a){var n,i,r=new Array(16),s=0;for(n=1;n<=Ia;n++)r[n]=s=s+a[n-1]<<1;for(i=0;i<=e;i++){var o=t[2*i+1];0!==o&&(t[2*i]=Qa(r[o]++,o))}}function en(t){var e;for(e=0;e<Ba;e++)t.dyn_ltree[2*e]=0;for(e=0;e<Da;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function an(t){t.bi_valid>8?Va(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function nn(t,e,a,n){var i=2*e,r=2*a;return t[i]<t[r]||t[i]===t[r]&&n[e]<=n[a]}function rn(t,e,a){for(var n=t.heap[a],i=a<<1;i<=t.heap_len&&(i<t.heap_len&&nn(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!nn(e,n,t.heap[i],t.depth));)t.heap[a]=t.heap[i],a=i,i<<=1;t.heap[a]=n}function sn(t,e,a){var n,i,r,s,o=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===n?Ja(t,i,e):(Ja(t,(r=Ha[i])+Za+1,e),0!==(s=Ta[r])&&Wa(t,i-=Pa[r],s),Ja(t,r=$a(--n),a),0!==(s=Na[r])&&Wa(t,n-=Ga[r],s))}while(o<t.last_lit);Ja(t,256,e)}function on(t,e){var a,n,i,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)r[2*(i=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=s[2*i+1]);for(e.max_code=h,a=t.heap_len>>1;a>=1;a--)rn(t,r,a);i=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],rn(t,r,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,r[2*i]=r[2*a]+r[2*n],t.depth[i]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,r[2*a+1]=r[2*n+1]=i,t.heap[1]=i++,rn(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,i,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,g=0;for(r=0;r<=Ia;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(r=l[2*l[2*(n=t.heap[a])+1]+1]+1)>c&&(r=c,g++),l[2*n+1]=r,n>h||(t.bl_count[r]++,s=0,n>=u&&(s=_[n-u]),o=l[2*n],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*n+1]+s)));if(0!==g){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,g-=2}while(g>0);for(r=c;0!==r;r--)for(n=t.bl_count[r];0!==n;)(i=t.heap[--a])>h||(l[2*i+1]!==r&&(t.opt_len+=(r-l[2*i+1])*l[2*i],l[2*i+1]=r),n--)}}(t,e),tn(r,h,t.bl_count)}function ln(t,e,a){var n,i,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)i=s,s=e[2*(n+1)+1],++o<l&&i===s||(o<h?t.bl_tree[2*i]+=o:0!==i?(i!==r&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,r=i,0===s?(l=138,h=3):i===s?(l=6,h=3):(l=7,h=4))}function hn(t,e,a){var n,i,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),n=0;n<=a;n++)if(i=s,s=e[2*(n+1)+1],!(++o<l&&i===s)){if(o<h)do{Ja(t,i,t.bl_tree)}while(0!=--o);else 0!==i?(i!==r&&(Ja(t,i,t.bl_tree),o--),Ja(t,16,t.bl_tree),Wa(t,o-3,2)):o<=10?(Ja(t,17,t.bl_tree),Wa(t,o-3,3)):(Ja(t,18,t.bl_tree),Wa(t,o-11,7));o=0,r=i,0===s?(l=138,h=3):i===s?(l=6,h=3):(l=7,h=4)}}Ra(Ga);var dn=!1;function fn(t,e,a,n){Wa(t,0+(n?1:0),3),function(t,e,a,n){an(t),n&&(Va(t,a),Va(t,~a)),Sa.arraySet(t.pending_buf,t.window,e,a,t.pending),t.pending+=a}(t,e,a,!0)}var _n=function(t){dn||(!function(){var t,e,a,n,i,r=new Array(16);for(a=0,n=0;n<28;n++)for(Pa[n]=a,t=0;t<1<<Ta[n];t++)Ha[a++]=n;for(Ha[a-1]=n,i=0,n=0;n<16;n++)for(Ga[n]=i,t=0;t<1<<Na[n];t++)Ma[i++]=n;for(i>>=7;n<Da;n++)for(Ga[n]=i<<7,t=0;t<1<<Na[n]-7;t++)Ma[256+i++]=n;for(e=0;e<=Ia;e++)r[e]=0;for(t=0;t<=143;)Ca[2*t+1]=8,t++,r[8]++;for(;t<=255;)Ca[2*t+1]=9,t++,r[9]++;for(;t<=279;)Ca[2*t+1]=7,t++,r[7]++;for(;t<=287;)Ca[2*t+1]=8,t++,r[8]++;for(tn(Ca,287,r),t=0;t<Da;t++)Fa[2*t+1]=5,Fa[2*t]=Qa(t,5);ja=new Ya(Ca,Ta,257,Ba,Ia),qa=new Ya(Fa,Na,0,Da,Ia),Ka=new Ya(new Array(0),La,0,19,7)}(),dn=!0),t.l_desc=new Xa(t.dyn_ltree,ja),t.d_desc=new Xa(t.dyn_dtree,qa),t.bl_desc=new Xa(t.bl_tree,Ka),t.bi_buf=0,t.bi_valid=0,en(t)},un=function(t,e,a,n){var i,r,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<Za;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),on(t,t.l_desc),on(t,t.d_desc),s=function(t){var e;for(ln(t,t.dyn_ltree,t.l_desc.max_code),ln(t,t.dyn_dtree,t.d_desc.max_code),on(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Oa[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(r=t.static_len+3+7>>>3)<=i&&(i=r)):i=r=a+5,a+4<=i&&-1!==e?fn(t,e,a,n):4===t.strategy||r===i?(Wa(t,2+(n?1:0),3),sn(t,Ca,Fa)):(Wa(t,4+(n?1:0),3),function(t,e,a,n){var i;for(Wa(t,e-257,5),Wa(t,a-1,5),Wa(t,n-4,4),i=0;i<n;i++)Wa(t,t.bl_tree[2*Oa[i]+1],3);hn(t,t.dyn_ltree,e-1),hn(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),sn(t,t.dyn_ltree,t.dyn_dtree)),en(t),n&&an(t)},cn={_tr_init:_n,_tr_stored_block:fn,_tr_flush_block:un,_tr_tally:function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(Ha[a]+Za+1)]++,t.dyn_dtree[2*$a(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){Wa(t,2,3),Ja(t,256,Ca),function(t){16===t.bi_valid?(Va(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}};var gn=function(t,e,a,n){for(var i=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{r=r+(i=i+e[n++]|0)|0}while(--s);i%=65521,r%=65521}return i|r<<16|0};var wn=function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}();var bn,pn=function(t,e,a,n){var i=wn,r=n+a;t^=-1;for(var s=n;s<r;s++)t=t>>>8^i[255&(t^e[s])];return-1^t},mn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},vn=-2,kn=258,yn=262,xn=103,zn=113,An=666;function En(t,e){return t.msg=mn[e],e}function Un(t){return(t<<1)-(t>4?9:0)}function Sn(t){for(var e=t.length;--e>=0;)t[e]=0}function Rn(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(Sa.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function Zn(t,e){cn._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Rn(t.strm)}function Bn(t,e){t.pending_buf[t.pending++]=e}function Dn(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function In(t,e){var a,n,i=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-yn?t.strstart-(t.w_size-yn):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+kn,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(a=e)+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do{}while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(n=kn-(_-r),r=_-kn,n>s){if(t.match_start=e,s=n,n>=o)break;u=h[r+s-1],c=h[r+s]}}}while((e=f[e&d])>l&&0!=--i);return s<=t.lookahead?s:t.lookahead}function Tn(t){var e,a,n,i,r,s,o,l,h,d,f=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-yn)){Sa.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=f?n-f:0}while(--a);e=a=f;do{n=t.prev[--e],t.prev[e]=n>=f?n-f:0}while(--a);i+=f}if(0===t.strm.avail_in)break;if(s=t.strm,o=t.window,l=t.strstart+t.lookahead,h=i,d=void 0,(d=s.avail_in)>h&&(d=h),a=0===d?0:(s.avail_in-=d,Sa.arraySet(o,s.input,s.next_in,d,l),1===s.state.wrap?s.adler=gn(s.adler,o,d,l):2===s.state.wrap&&(s.adler=pn(s.adler,o,d,l)),s.next_in+=d,s.total_in+=d,d),t.lookahead+=a,t.lookahead+t.insert>=3)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+3-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<yn&&0!==t.strm.avail_in)}function Nn(t,e){for(var a,n;;){if(t.lookahead<yn){if(Tn(t),t.lookahead<yn&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-yn&&(t.match_length=In(t,a)),t.match_length>=3)if(n=cn._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=cn._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Zn(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(Zn(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Zn(t,!1),0===t.strm.avail_out)?1:2}function Ln(t,e){for(var a,n,i;;){if(t.lookahead<yn){if(Tn(t),t.lookahead<yn&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-yn&&(t.match_length=In(t,a),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=cn._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Zn(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=cn._tr_tally(t,0,t.window[t.strstart-1]))&&Zn(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=cn._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(Zn(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Zn(t,!1),0===t.strm.avail_out)?1:2}function On(t,e,a,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=i}function Cn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Sa.Buf16(1146),this.dyn_dtree=new Sa.Buf16(122),this.bl_tree=new Sa.Buf16(78),Sn(this.dyn_ltree),Sn(this.dyn_dtree),Sn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Sa.Buf16(16),this.heap=new Sa.Buf16(573),Sn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Sa.Buf16(573),Sn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Fn(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:zn,t.adler=2===e.wrap?0:1,e.last_flush=0,cn._tr_init(e),0):En(t,vn)}function Mn(t){var e,a=Fn(t);return 0===a&&((e=t.state).window_size=2*e.w_size,Sn(e.head),e.max_lazy_match=bn[e.level].max_lazy,e.good_match=bn[e.level].good_length,e.nice_match=bn[e.level].nice_length,e.max_chain_length=bn[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a}function Hn(t,e,a,n,i,r){if(!t)return vn;var s=1;if(-1===e&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>9||8!==a||n<8||n>15||e<0||e>9||r<0||r>4)return En(t,vn);8===n&&(n=9);var o=new Cn;return t.state=o,o.strm=t,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Sa.Buf8(2*o.w_size),o.head=new Sa.Buf16(o.hash_size),o.prev=new Sa.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Sa.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=a,Mn(t)}bn=[new On(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Tn(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Zn(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-yn&&(Zn(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Zn(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Zn(t,!1),t.strm.avail_out),1)})),new On(4,4,8,4,Nn),new On(4,5,16,8,Nn),new On(4,6,32,32,Nn),new On(4,4,16,16,Ln),new On(8,16,32,32,Ln),new On(8,16,128,128,Ln),new On(8,32,128,256,Ln),new On(32,128,258,1024,Ln),new On(32,258,258,4096,Ln)];var Pn=function(t,e){var a,n,i,r,s,o,l,h,d=e.length;if(!t||!t.state)return vn;if(2===(r=(a=t.state).wrap)||1===r&&42!==a.status||a.lookahead)return vn;for(1===r&&(t.adler=gn(t.adler,e,d,0)),a.wrap=0,d>=a.w_size&&(0===r&&(Sn(a.head),a.strstart=0,a.block_start=0,a.insert=0),h=new Sa.Buf8(a.w_size),Sa.arraySet(h,e,d-a.w_size,a.w_size,0),e=h,d=a.w_size),s=t.avail_in,o=t.next_in,l=t.input,t.avail_in=d,t.next_in=0,t.input=e,Tn(a);a.lookahead>=3;){n=a.strstart,i=a.lookahead-2;do{a.ins_h=(a.ins_h<<a.hash_shift^a.window[n+3-1])&a.hash_mask,a.prev[n&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=n,n++}while(--i);a.strstart=n,a.lookahead=2,Tn(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,t.next_in=o,t.input=l,t.avail_in=s,a.wrap=r,0},jn={deflateInit:function(t,e){return Hn(t,e,8,15,8,0)},deflateInit2:Hn,deflateReset:Mn,deflateResetKeep:Fn,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?vn:(t.state.gzhead=e,0):vn},deflate:function(t,e){var a,n,i,r;if(!t||!t.state||e>5||e<0)return t?En(t,vn):vn;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||n.status===An&&4!==e)return En(t,0===t.avail_out?-5:vn);if(n.strm=t,a=n.last_flush,n.last_flush=e,42===n.status)if(2===n.wrap)t.adler=0,Bn(n,31),Bn(n,139),Bn(n,8),n.gzhead?(Bn(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Bn(n,255&n.gzhead.time),Bn(n,n.gzhead.time>>8&255),Bn(n,n.gzhead.time>>16&255),Bn(n,n.gzhead.time>>24&255),Bn(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),Bn(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Bn(n,255&n.gzhead.extra.length),Bn(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=pn(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(Bn(n,0),Bn(n,0),Bn(n,0),Bn(n,0),Bn(n,0),Bn(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),Bn(n,3),n.status=zn);else{var s=8+(n.w_bits-8<<4)<<8;s|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(s|=32),s+=31-s%31,n.status=zn,Dn(n,s),0!==n.strstart&&(Dn(n,t.adler>>>16),Dn(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(t.adler=pn(t.adler,n.pending_buf,n.pending-i,i)),Rn(t),i=n.pending,n.pending!==n.pending_buf_size));)Bn(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(t.adler=pn(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=pn(t.adler,n.pending_buf,n.pending-i,i)),Rn(t),i=n.pending,n.pending===n.pending_buf_size)){r=1;break}r=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Bn(n,r)}while(0!==r);n.gzhead.hcrc&&n.pending>i&&(t.adler=pn(t.adler,n.pending_buf,n.pending-i,i)),0===r&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=pn(t.adler,n.pending_buf,n.pending-i,i)),Rn(t),i=n.pending,n.pending===n.pending_buf_size)){r=1;break}r=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Bn(n,r)}while(0!==r);n.gzhead.hcrc&&n.pending>i&&(t.adler=pn(t.adler,n.pending_buf,n.pending-i,i)),0===r&&(n.status=xn)}else n.status=xn;if(n.status===xn&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Rn(t),n.pending+2<=n.pending_buf_size&&(Bn(n,255&t.adler),Bn(n,t.adler>>8&255),t.adler=0,n.status=zn)):n.status=zn),0!==n.pending){if(Rn(t),0===t.avail_out)return n.last_flush=-1,0}else if(0===t.avail_in&&Un(e)<=Un(a)&&4!==e)return En(t,-5);if(n.status===An&&0!==t.avail_in)return En(t,-5);if(0!==t.avail_in||0!==n.lookahead||0!==e&&n.status!==An){var o=2===n.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(Tn(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,a=cn._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(Zn(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Zn(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Zn(t,!1),0===t.strm.avail_out)?1:2}(n,e):3===n.strategy?function(t,e){for(var a,n,i,r,s=t.window;;){if(t.lookahead<=kn){if(Tn(t),t.lookahead<=kn&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){r=t.strstart+kn;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<r);t.match_length=kn-(r-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=cn._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=cn._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(Zn(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Zn(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Zn(t,!1),0===t.strm.avail_out)?1:2}(n,e):bn[n.level].func(n,e);if(3!==o&&4!==o||(n.status=An),1===o||3===o)return 0===t.avail_out&&(n.last_flush=-1),0;if(2===o&&(1===e?cn._tr_align(n):5!==e&&(cn._tr_stored_block(n,0,0,!1),3===e&&(Sn(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Rn(t),0===t.avail_out))return n.last_flush=-1,0}return 4!==e?0:n.wrap<=0?1:(2===n.wrap?(Bn(n,255&t.adler),Bn(n,t.adler>>8&255),Bn(n,t.adler>>16&255),Bn(n,t.adler>>24&255),Bn(n,255&t.total_in),Bn(n,t.total_in>>8&255),Bn(n,t.total_in>>16&255),Bn(n,t.total_in>>24&255)):(Dn(n,t.adler>>>16),Dn(n,65535&t.adler)),Rn(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?0:1)},deflateEnd:function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&e!==xn&&e!==zn&&e!==An?En(t,vn):(t.state=null,e===zn?En(t,-3):0):vn},deflateSetDictionary:Pn,deflateInfo:"pako deflate (from Nodeca project)"},qn=!0,Kn=!0;try{String.fromCharCode.apply(null,[0])}catch(t){qn=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Kn=!1}for(var Gn=new Sa.Buf8(256),Yn=0;Yn<256;Yn++)Gn[Yn]=Yn>=252?6:Yn>=248?5:Yn>=240?4:Yn>=224?3:Yn>=192?2:1;Gn[254]=Gn[254]=1;function Xn(t,e){if(e<65534&&(t.subarray&&Kn||!t.subarray&&qn))return String.fromCharCode.apply(null,Sa.shrinkBuf(t,e));for(var a="",n=0;n<e;n++)a+=String.fromCharCode(t[n]);return a}var $n=function(t){var e,a,n,i,r,s=t.length,o=0;for(i=0;i<s;i++)55296==(64512&(a=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=t.charCodeAt(i+1)))&&(a=65536+(a-55296<<10)+(n-56320),i++),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Sa.Buf8(o),r=0,i=0;r<o;i++)55296==(64512&(a=t.charCodeAt(i)))&&i+1<s&&56320==(64512&(n=t.charCodeAt(i+1)))&&(a=65536+(a-55296<<10)+(n-56320),i++),a<128?e[r++]=a:a<2048?(e[r++]=192|a>>>6,e[r++]=128|63&a):a<65536?(e[r++]=224|a>>>12,e[r++]=128|a>>>6&63,e[r++]=128|63&a):(e[r++]=240|a>>>18,e[r++]=128|a>>>12&63,e[r++]=128|a>>>6&63,e[r++]=128|63&a);return e},Vn=function(t){return Xn(t,t.length)},Wn=function(t){for(var e=new Sa.Buf8(t.length),a=0,n=e.length;a<n;a++)e[a]=t.charCodeAt(a);return e},Jn=function(t,e){var a,n,i,r,s=e||t.length,o=new Array(2*s);for(n=0,a=0;a<s;)if((i=t[a++])<128)o[n++]=i;else if((r=Gn[i])>4)o[n++]=65533,a+=r-1;else{for(i&=2===r?31:3===r?15:7;r>1&&a<s;)i=i<<6|63&t[a++],r--;r>1?o[n++]=65533:i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|1023&i)}return Xn(o,n)},Qn=function(t,e){var a;for((e=e||t.length)>t.length&&(e=t.length),a=e-1;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+Gn[t[a]]>e?a:e};var ti=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},ei=Object.prototype.toString;function ai(t){if(!(this instanceof ai))return new ai(t);this.options=Sa.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ti,this.strm.avail_out=0;var a=jn.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==a)throw new Error(mn[a]);if(e.header&&jn.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(n="string"==typeof e.dictionary?$n(e.dictionary):"[object ArrayBuffer]"===ei.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(a=jn.deflateSetDictionary(this.strm,n)))throw new Error(mn[a]);this._dict_set=!0}}function ni(t,e){var a=new ai(e);if(a.push(t,!0),a.err)throw a.msg||mn[a.err];return a.result}ai.prototype.push=function(t,e){var a,n,i=this.strm,r=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=$n(t):"[object ArrayBuffer]"===ei.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new Sa.Buf8(r),i.next_out=0,i.avail_out=r),1!==(a=jn.deflate(i,n))&&0!==a)return this.onEnd(a),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(Vn(Sa.shrinkBuf(i.output,i.next_out))):this.onData(Sa.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==a);return 4===n?(a=jn.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,0===a):2!==n||(this.onEnd(0),i.avail_out=0,!0)},ai.prototype.onData=function(t){this.chunks.push(t)},ai.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Sa.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ii={Deflate:ai,deflate:ni,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ni(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ni(t,e)}},ri=function(t,e){var a,n,i,r,s,o,l,h,d,f,_,u,c,g,w,b,p,m,v,k,y,x,z,A,E;a=t.state,n=t.next_in,A=t.input,i=n+(t.avail_in-5),r=t.next_out,E=t.output,s=r-(e-t.avail_out),o=r+(t.avail_out-257),l=a.dmax,h=a.wsize,d=a.whave,f=a.wnext,_=a.window,u=a.hold,c=a.bits,g=a.lencode,w=a.distcode,b=(1<<a.lenbits)-1,p=(1<<a.distbits)-1;t:do{c<15&&(u+=A[n++]<<c,c+=8,u+=A[n++]<<c,c+=8),m=g[u&b];e:for(;;){if(u>>>=v=m>>>24,c-=v,0===(v=m>>>16&255))E[r++]=65535&m;else{if(!(16&v)){if(0==(64&v)){m=g[(65535&m)+(u&(1<<v)-1)];continue e}if(32&v){a.mode=12;break t}t.msg="invalid literal/length code",a.mode=30;break t}k=65535&m,(v&=15)&&(c<v&&(u+=A[n++]<<c,c+=8),k+=u&(1<<v)-1,u>>>=v,c-=v),c<15&&(u+=A[n++]<<c,c+=8,u+=A[n++]<<c,c+=8),m=w[u&p];a:for(;;){if(u>>>=v=m>>>24,c-=v,!(16&(v=m>>>16&255))){if(0==(64&v)){m=w[(65535&m)+(u&(1<<v)-1)];continue a}t.msg="invalid distance code",a.mode=30;break t}if(y=65535&m,c<(v&=15)&&(u+=A[n++]<<c,(c+=8)<v&&(u+=A[n++]<<c,c+=8)),(y+=u&(1<<v)-1)>l){t.msg="invalid distance too far back",a.mode=30;break t}if(u>>>=v,c-=v,y>(v=r-s)){if((v=y-v)>d&&a.sane){t.msg="invalid distance too far back",a.mode=30;break t}if(x=0,z=_,0===f){if(x+=h-v,v<k){k-=v;do{E[r++]=_[x++]}while(--v);x=r-y,z=E}}else if(f<v){if(x+=h+f-v,(v-=f)<k){k-=v;do{E[r++]=_[x++]}while(--v);if(x=0,f<k){k-=v=f;do{E[r++]=_[x++]}while(--v);x=r-y,z=E}}}else if(x+=f-v,v<k){k-=v;do{E[r++]=_[x++]}while(--v);x=r-y,z=E}for(;k>2;)E[r++]=z[x++],E[r++]=z[x++],E[r++]=z[x++],k-=3;k&&(E[r++]=z[x++],k>1&&(E[r++]=z[x++]))}else{x=r-y;do{E[r++]=E[x++],E[r++]=E[x++],E[r++]=E[x++],k-=3}while(k>2);k&&(E[r++]=E[x++],k>1&&(E[r++]=E[x++]))}break}}break}}while(n<i&&r<o);n-=k=c>>3,u&=(1<<(c-=k<<3))-1,t.next_in=n,t.next_out=r,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=r<o?o-r+257:257-(r-o),a.hold=u,a.bits=c},si=15,oi=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],li=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],hi=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],di=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],fi=function(t,e,a,n,i,r,s,o){var l,h,d,f,_,u,c,g,w,b=o.bits,p=0,m=0,v=0,k=0,y=0,x=0,z=0,A=0,E=0,U=0,S=null,R=0,Z=new Sa.Buf16(16),B=new Sa.Buf16(16),D=null,I=0;for(p=0;p<=si;p++)Z[p]=0;for(m=0;m<n;m++)Z[e[a+m]]++;for(y=b,k=si;k>=1&&0===Z[k];k--);if(y>k&&(y=k),0===k)return i[r++]=20971520,i[r++]=20971520,o.bits=1,0;for(v=1;v<k&&0===Z[v];v++);for(y<v&&(y=v),A=1,p=1;p<=si;p++)if(A<<=1,(A-=Z[p])<0)return-1;if(A>0&&(0===t||1!==k))return-1;for(B[1]=0,p=1;p<si;p++)B[p+1]=B[p]+Z[p];for(m=0;m<n;m++)0!==e[a+m]&&(s[B[e[a+m]]++]=m);if(0===t?(S=D=s,u=19):1===t?(S=oi,R-=257,D=li,I-=257,u=256):(S=hi,D=di,u=-1),U=0,m=0,p=v,_=r,x=y,z=0,d=-1,f=(E=1<<y)-1,1===t&&E>852||2===t&&E>592)return 1;for(;;){c=p-z,s[m]<u?(g=0,w=s[m]):s[m]>u?(g=D[I+s[m]],w=S[R+s[m]]):(g=96,w=0),l=1<<p-z,v=h=1<<x;do{i[_+(U>>z)+(h-=l)]=c<<24|g<<16|w|0}while(0!==h);for(l=1<<p-1;U&l;)l>>=1;if(0!==l?(U&=l-1,U+=l):U=0,m++,0==--Z[p]){if(p===k)break;p=e[a+s[m]]}if(p>y&&(U&f)!==d){for(0===z&&(z=y),_+=v,A=1<<(x=p-z);x+z<k&&!((A-=Z[x+z])<=0);)x++,A<<=1;if(E+=1<<x,1===t&&E>852||2===t&&E>592)return 1;i[d=U&f]=y<<24|x<<16|_-r|0}}return 0!==U&&(i[_+U]=p-z<<24|64<<16|0),o.bits=y,0},_i=-2,ui=12,ci=30;function gi(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function wi(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Sa.Buf16(320),this.work=new Sa.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function bi(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Sa.Buf32(852),e.distcode=e.distdyn=new Sa.Buf32(592),e.sane=1,e.back=-1,0):_i}function pi(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,bi(t)):_i}function mi(t,e){var a,n;return t&&t.state?(n=t.state,e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_i:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=a,n.wbits=e,pi(t))):_i}function vi(t,e){var a,n;return t?(n=new wi,t.state=n,n.window=null,0!==(a=mi(t,e))&&(t.state=null),a):_i}var ki,yi,xi=!0;function zi(t){if(xi){var e;for(ki=new Sa.Buf32(512),yi=new Sa.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(fi(1,t.lens,0,288,ki,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;fi(2,t.lens,0,32,yi,0,t.work,{bits:5}),xi=!1}t.lencode=ki,t.lenbits=9,t.distcode=yi,t.distbits=5}function Ai(t,e,a,n){var i,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Sa.Buf8(r.wsize)),n>=r.wsize?(Sa.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((i=r.wsize-r.wnext)>n&&(i=n),Sa.arraySet(r.window,e,a-n,i,r.wnext),(n-=i)?(Sa.arraySet(r.window,e,a-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=i,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=i))),0}var Ei=function(t,e){var a,n,i,r,s,o,l,h,d,f,_,u,c,g,w,b,p,m,v,k,y,x,z,A,E=0,U=new Sa.Buf8(4),S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return _i;(a=t.state).mode===ui&&(a.mode=13),s=t.next_out,i=t.output,l=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,h=a.hold,d=a.bits,f=o,_=l,x=0;t:for(;;)switch(a.mode){case 1:if(0===a.wrap){a.mode=13;break}for(;d<16;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(2&a.wrap&&35615===h){a.check=0,U[0]=255&h,U[1]=h>>>8&255,a.check=pn(a.check,U,2,0),h=0,d=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=ci;break}if(8!=(15&h)){t.msg="unknown compression method",a.mode=ci;break}if(d-=4,y=8+(15&(h>>>=4)),0===a.wbits)a.wbits=y;else if(y>a.wbits){t.msg="invalid window size",a.mode=ci;break}a.dmax=1<<y,t.adler=a.check=1,a.mode=512&h?10:ui,h=0,d=0;break;case 2:for(;d<16;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(a.flags=h,8!=(255&a.flags)){t.msg="unknown compression method",a.mode=ci;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=ci;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&(U[0]=255&h,U[1]=h>>>8&255,a.check=pn(a.check,U,2,0)),h=0,d=0,a.mode=3;case 3:for(;d<32;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&(U[0]=255&h,U[1]=h>>>8&255,U[2]=h>>>16&255,U[3]=h>>>24&255,a.check=pn(a.check,U,4,0)),h=0,d=0,a.mode=4;case 4:for(;d<16;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&(U[0]=255&h,U[1]=h>>>8&255,a.check=pn(a.check,U,2,0)),h=0,d=0,a.mode=5;case 5:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&(U[0]=255&h,U[1]=h>>>8&255,a.check=pn(a.check,U,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&((u=a.length)>o&&(u=o),u&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),Sa.arraySet(a.head.extra,n,r,u,y)),512&a.flags&&(a.check=pn(a.check,n,u,r)),o-=u,r+=u,a.length-=u),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===o)break t;u=0;do{y=n[r+u++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&u<o);if(512&a.flags&&(a.check=pn(a.check,n,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===o)break t;u=0;do{y=n[r+u++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&u<o);if(512&a.flags&&(a.check=pn(a.check,n,u,r)),o-=u,r+=u,y)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=ci;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=ui;break;case 10:for(;d<32;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}t.adler=a.check=gi(h),h=0,d=0,a.mode=11;case 11:if(0===a.havedict)return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,2;t.adler=a.check=1,a.mode=ui;case ui:if(5===e||6===e)break t;case 13:if(a.last){h>>>=7&d,d-=7&d,a.mode=27;break}for(;d<3;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}switch(a.last=1&h,d-=1,3&(h>>>=1)){case 0:a.mode=14;break;case 1:if(zi(a),a.mode=20,6===e){h>>>=2,d-=2;break t}break;case 2:a.mode=17;break;case 3:t.msg="invalid block type",a.mode=ci}h>>>=2,d-=2;break;case 14:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=ci;break}if(a.length=65535&h,h=0,d=0,a.mode=15,6===e)break t;case 15:a.mode=16;case 16:if(u=a.length){if(u>o&&(u=o),u>l&&(u=l),0===u)break t;Sa.arraySet(i,n,r,u,s),o-=u,r+=u,l-=u,s+=u,a.length-=u;break}a.mode=ui;break;case 17:for(;d<14;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=ci;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.lens[S[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[S[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,z={bits:a.lenbits},x=fi(0,a.lens,0,19,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg="invalid code lengths set",a.mode=ci;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;b=(E=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,p=65535&E,!((w=E>>>24)<=d);){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(p<16)h>>>=w,d-=w,a.lens[a.have++]=p;else{if(16===p){for(A=w+2;d<A;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(h>>>=w,d-=w,0===a.have){t.msg="invalid bit length repeat",a.mode=ci;break}y=a.lens[a.have-1],u=3+(3&h),h>>>=2,d-=2}else if(17===p){for(A=w+3;d<A;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}d-=w,y=0,u=3+(7&(h>>>=w)),h>>>=3,d-=3}else{for(A=w+7;d<A;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}d-=w,y=0,u=11+(127&(h>>>=w)),h>>>=7,d-=7}if(a.have+u>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=ci;break}for(;u--;)a.lens[a.have++]=y}}if(a.mode===ci)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=ci;break}if(a.lenbits=9,z={bits:a.lenbits},x=fi(1,a.lens,0,a.nlen,a.lencode,0,a.work,z),a.lenbits=z.bits,x){t.msg="invalid literal/lengths set",a.mode=ci;break}if(a.distbits=6,a.distcode=a.distdyn,z={bits:a.distbits},x=fi(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,z),a.distbits=z.bits,x){t.msg="invalid distances set",a.mode=ci;break}if(a.mode=20,6===e)break t;case 20:a.mode=21;case 21:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,ri(t,_),s=t.next_out,i=t.output,l=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,h=a.hold,d=a.bits,a.mode===ui&&(a.back=-1);break}for(a.back=0;b=(E=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,p=65535&E,!((w=E>>>24)<=d);){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(b&&0==(240&b)){for(m=w,v=b,k=p;b=(E=a.lencode[k+((h&(1<<m+v)-1)>>m)])>>>16&255,p=65535&E,!(m+(w=E>>>24)<=d);){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}h>>>=m,d-=m,a.back+=m}if(h>>>=w,d-=w,a.back+=w,a.length=p,0===b){a.mode=26;break}if(32&b){a.back=-1,a.mode=ui;break}if(64&b){t.msg="invalid literal/length code",a.mode=ci;break}a.extra=15&b,a.mode=22;case 22:if(a.extra){for(A=a.extra;d<A;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;b=(E=a.distcode[h&(1<<a.distbits)-1])>>>16&255,p=65535&E,!((w=E>>>24)<=d);){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(0==(240&b)){for(m=w,v=b,k=p;b=(E=a.distcode[k+((h&(1<<m+v)-1)>>m)])>>>16&255,p=65535&E,!(m+(w=E>>>24)<=d);){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}h>>>=m,d-=m,a.back+=m}if(h>>>=w,d-=w,a.back+=w,64&b){t.msg="invalid distance code",a.mode=ci;break}a.offset=p,a.extra=15&b,a.mode=24;case 24:if(a.extra){for(A=a.extra;d<A;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=ci;break}a.mode=25;case 25:if(0===l)break t;if(u=_-l,a.offset>u){if((u=a.offset-u)>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=ci;break}u>a.wnext?(u-=a.wnext,c=a.wsize-u):c=a.wnext-u,u>a.length&&(u=a.length),g=a.window}else g=i,c=s-a.offset,u=a.length;u>l&&(u=l),l-=u,a.length-=u;do{i[s++]=g[c++]}while(--u);0===a.length&&(a.mode=21);break;case 26:if(0===l)break t;i[s++]=a.length,l--,a.mode=21;break;case 27:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=n[r++]<<d,d+=8}if(_-=l,t.total_out+=_,a.total+=_,_&&(t.adler=a.check=a.flags?pn(a.check,i,_,s-_):gn(a.check,i,_,s-_)),_=l,(a.flags?h:gi(h))!==a.check){t.msg="incorrect data check",a.mode=ci;break}h=0,d=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=n[r++]<<d,d+=8}if(h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=ci;break}h=0,d=0}a.mode=29;case 29:x=1;break t;case ci:x=-3;break t;case 31:return-4;default:return _i}return t.next_out=s,t.avail_out=l,t.next_in=r,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||_!==t.avail_out&&a.mode<ci&&(a.mode<27||4!==e))&&Ai(t,t.output,t.next_out,_-t.avail_out),f-=t.avail_in,_-=t.avail_out,t.total_in+=f,t.total_out+=_,a.total+=_,a.wrap&&_&&(t.adler=a.check=a.flags?pn(a.check,i,_,t.next_out-_):gn(a.check,i,_,t.next_out-_)),t.data_type=a.bits+(a.last?64:0)+(a.mode===ui?128:0)+(20===a.mode||15===a.mode?256:0),(0===f&&0===_||4===e)&&0===x&&(x=-5),x},Ui={inflateReset:pi,inflateReset2:mi,inflateResetKeep:bi,inflateInit:function(t){return vi(t,15)},inflateInit2:vi,inflate:Ei,inflateEnd:function(t){if(!t||!t.state)return _i;var e=t.state;return e.window&&(e.window=null),t.state=null,0},inflateGetHeader:function(t,e){var a;return t&&t.state?0==(2&(a=t.state).wrap)?_i:(a.head=e,e.done=!1,0):_i},inflateSetDictionary:function(t,e){var a,n=e.length;return t&&t.state?0!==(a=t.state).wrap&&11!==a.mode?_i:11===a.mode&&gn(1,e,n,0)!==a.check?-3:Ai(t,e,n,n)?(a.mode=31,-4):(a.havedict=1,0):_i},inflateInfo:"pako inflate (from Nodeca project)"},Si={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var Ri=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Zi=Object.prototype.toString;function Bi(t){if(!(this instanceof Bi))return new Bi(t);this.options=Sa.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ti,this.strm.avail_out=0;var a=Ui.inflateInit2(this.strm,e.windowBits);if(a!==Si.Z_OK)throw new Error(mn[a]);if(this.header=new Ri,Ui.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=$n(e.dictionary):"[object ArrayBuffer]"===Zi.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=Ui.inflateSetDictionary(this.strm,e.dictionary))!==Si.Z_OK))throw new Error(mn[a])}function Di(t,e){var a=new Bi(e);if(a.push(t,!0),a.err)throw a.msg||mn[a.err];return a.result}Bi.prototype.push=function(t,e){var a,n,i,r,s,o=this.strm,l=this.options.chunkSize,h=this.options.dictionary,d=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?Si.Z_FINISH:Si.Z_NO_FLUSH,"string"==typeof t?o.input=Wn(t):"[object ArrayBuffer]"===Zi.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new Sa.Buf8(l),o.next_out=0,o.avail_out=l),(a=Ui.inflate(o,Si.Z_NO_FLUSH))===Si.Z_NEED_DICT&&h&&(a=Ui.inflateSetDictionary(this.strm,h)),a===Si.Z_BUF_ERROR&&!0===d&&(a=Si.Z_OK,d=!1),a!==Si.Z_STREAM_END&&a!==Si.Z_OK)return this.onEnd(a),this.ended=!0,!1;o.next_out&&(0!==o.avail_out&&a!==Si.Z_STREAM_END&&(0!==o.avail_in||n!==Si.Z_FINISH&&n!==Si.Z_SYNC_FLUSH)||("string"===this.options.to?(i=Qn(o.output,o.next_out),r=o.next_out-i,s=Jn(o.output,i),o.next_out=r,o.avail_out=l-r,r&&Sa.arraySet(o.output,o.output,i,r,0),this.onData(s)):this.onData(Sa.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(d=!0)}while((o.avail_in>0||0===o.avail_out)&&a!==Si.Z_STREAM_END);return a===Si.Z_STREAM_END&&(n=Si.Z_FINISH),n===Si.Z_FINISH?(a=Ui.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Si.Z_OK):n!==Si.Z_SYNC_FLUSH||(this.onEnd(Si.Z_OK),o.avail_out=0,!0)},Bi.prototype.onData=function(t){this.chunks.push(t)},Bi.prototype.onEnd=function(t){t===Si.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Sa.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Ii={Inflate:Bi,inflate:Di,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Di(t,e)},ungzip:Di},Ti={};(0,Sa.assign)(Ti,ii,Ii,Si);var Ni=Ti,Li=xa((function(t){!function(){var e={};t.exports=e,function(t,e){t.toRGBA8=function(e){var a=e.width,n=e.height;if(null==e.tabs.acTL)return[t.toRGBA8.decodeImage(e.data,a,n,e).buffer];var i=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var r,s=new Uint8Array(a*n*4),o=0;o<e.frames.length;o++){var l=e.frames[o],h=l.rect.x,d=l.rect.y,f=l.rect.width,_=l.rect.height,u=t.toRGBA8.decodeImage(l.data,f,_,e);if(0==o?r=u:0==l.blend?t._copyTile(u,f,_,r,a,n,h,d,0):1==l.blend&&t._copyTile(u,f,_,r,a,n,h,d,1),i.push(r.buffer),r=r.slice(0),0==l.dispose);else if(1==l.dispose)t._copyTile(s,f,_,r,a,n,h,d,0);else if(2==l.dispose){for(var c=o-1;2==e.frames[c].dispose;)c--;r=new Uint8Array(i[c]).slice(0)}}return i},t.toRGBA8.decodeImage=function(e,a,n,i){var r=a*n,s=t.decode._getBPP(i),o=Math.ceil(a*s/8),l=new Uint8Array(4*r),h=new Uint32Array(l.buffer),d=i.ctype,f=i.depth,_=t._bin.readUshort;if(6==d){var u=r<<2;if(8==f)for(var c=0;c<u;c++)l[c]=e[c];if(16==f)for(c=0;c<u;c++)l[c]=e[c<<1]}else if(2==d){var g=i.tabs.tRNS,w=-1,b=-1,p=-1;if(g&&(w=g[0],b=g[1],p=g[2]),8==f)for(c=0;c<r;c++){var m=3*c;l[E=c<<2]=e[m],l[E+1]=e[m+1],l[E+2]=e[m+2],l[E+3]=255,-1!=w&&e[m]==w&&e[m+1]==b&&e[m+2]==p&&(l[E+3]=0)}if(16==f)for(c=0;c<r;c++){m=6*c;l[E=c<<2]=e[m],l[E+1]=e[m+2],l[E+2]=e[m+4],l[E+3]=255,-1!=w&&_(e,m)==w&&_(e,m+2)==b&&_(e,m+4)==p&&(l[E+3]=0)}}else if(3==d){var v=i.tabs.PLTE,k=i.tabs.tRNS,y=k?k.length:0;if(1==f)for(var x=0;x<n;x++){var z=x*o,A=x*a;for(c=0;c<a;c++){var E=A+c<<2,U=3*(S=e[z+(c>>3)]>>7-((7&c)<<0)&1);l[E]=v[U],l[E+1]=v[U+1],l[E+2]=v[U+2],l[E+3]=S<y?k[S]:255}}if(2==f)for(x=0;x<n;x++)for(z=x*o,A=x*a,c=0;c<a;c++){E=A+c<<2,U=3*(S=e[z+(c>>2)]>>6-((3&c)<<1)&3);l[E]=v[U],l[E+1]=v[U+1],l[E+2]=v[U+2],l[E+3]=S<y?k[S]:255}if(4==f)for(x=0;x<n;x++)for(z=x*o,A=x*a,c=0;c<a;c++){E=A+c<<2,U=3*(S=e[z+(c>>1)]>>4-((1&c)<<2)&15);l[E]=v[U],l[E+1]=v[U+1],l[E+2]=v[U+2],l[E+3]=S<y?k[S]:255}if(8==f)for(c=0;c<r;c++){var S;E=c<<2,U=3*(S=e[c]);l[E]=v[U],l[E+1]=v[U+1],l[E+2]=v[U+2],l[E+3]=S<y?k[S]:255}}else if(4==d){if(8==f)for(c=0;c<r;c++){E=c<<2;var R=e[Z=c<<1];l[E]=R,l[E+1]=R,l[E+2]=R,l[E+3]=e[Z+1]}if(16==f)for(c=0;c<r;c++){var Z;E=c<<2,R=e[Z=c<<2];l[E]=R,l[E+1]=R,l[E+2]=R,l[E+3]=e[Z+2]}}else if(0==d){w=i.tabs.tRNS?i.tabs.tRNS:-1;if(1==f)for(c=0;c<r;c++){var B=(R=255*(e[c>>3]>>7-(7&c)&1))==255*w?0:255;h[c]=B<<24|R<<16|R<<8|R}if(2==f)for(c=0;c<r;c++){B=(R=85*(e[c>>2]>>6-((3&c)<<1)&3))==85*w?0:255;h[c]=B<<24|R<<16|R<<8|R}if(4==f)for(c=0;c<r;c++){B=(R=17*(e[c>>1]>>4-((1&c)<<2)&15))==17*w?0:255;h[c]=B<<24|R<<16|R<<8|R}if(8==f)for(c=0;c<r;c++){B=(R=e[c])==w?0:255;h[c]=B<<24|R<<16|R<<8|R}if(16==f)for(c=0;c<r;c++){R=e[c<<1],B=_(e,c<<1)==w?0:255;h[c]=B<<24|R<<16|R<<8|R}}return l},t.decode=function(e){for(var a,n=new Uint8Array(e),i=8,r=t._bin,s=r.readUshort,o=r.readUint,l={tabs:{},frames:[]},h=new Uint8Array(n.length),d=0,f=0,_=[137,80,78,71,13,10,26,10],u=0;u<8;u++)if(n[u]!=_[u])throw"The input is not a PNG file!";for(;i<n.length;){var c=r.readUint(n,i);i+=4;var g=r.readASCII(n,i,4);if(i+=4,"IHDR"==g)t.decode._IHDR(n,i,l);else if("IDAT"==g){for(u=0;u<c;u++)h[d+u]=n[i+u];d+=c}else if("acTL"==g)l.tabs[g]={num_frames:o(n,i),num_plays:o(n,i+4)},a=new Uint8Array(n.length);else if("fcTL"==g){if(0!=f)(z=l.frames[l.frames.length-1]).data=t.decode._decompress(l,a.slice(0,f),z.rect.width,z.rect.height),f=0;var w={x:o(n,i+12),y:o(n,i+16),width:o(n,i+4),height:o(n,i+8)},b=s(n,i+22);b=s(n,i+20)/(0==b?100:b);var p={rect:w,delay:Math.round(1e3*b),dispose:n[i+24],blend:n[i+25]};l.frames.push(p)}else if("fdAT"==g){for(u=0;u<c-4;u++)a[f+u]=n[i+u+4];f+=c-4}else if("pHYs"==g)l.tabs[g]=[r.readUint(n,i),r.readUint(n,i+4),n[i+8]];else if("cHRM"==g){l.tabs[g]=[];for(u=0;u<8;u++)l.tabs[g].push(r.readUint(n,i+4*u))}else if("tEXt"==g){null==l.tabs[g]&&(l.tabs[g]={});var m=r.nextZero(n,i),v=r.readASCII(n,i,m-i),k=r.readASCII(n,m+1,i+c-m-1);l.tabs[g][v]=k}else if("iTXt"==g){null==l.tabs[g]&&(l.tabs[g]={});m=0;var y=i;m=r.nextZero(n,y);v=r.readASCII(n,y,m-y);n[y=m+1],n[y+1],y+=2,m=r.nextZero(n,y),r.readASCII(n,y,m-y),y=m+1,m=r.nextZero(n,y),r.readUTF8(n,y,m-y),y=m+1;k=r.readUTF8(n,y,c-(y-i));l.tabs[g][v]=k}else if("PLTE"==g)l.tabs[g]=r.readBytes(n,i,c);else if("hIST"==g){var x=l.tabs.PLTE.length/3;l.tabs[g]=[];for(u=0;u<x;u++)l.tabs[g].push(s(n,i+2*u))}else if("tRNS"==g)3==l.ctype?l.tabs[g]=r.readBytes(n,i,c):0==l.ctype?l.tabs[g]=s(n,i):2==l.ctype&&(l.tabs[g]=[s(n,i),s(n,i+2),s(n,i+4)]);else if("gAMA"==g)l.tabs[g]=r.readUint(n,i)/1e5;else if("sRGB"==g)l.tabs[g]=n[i];else if("bKGD"==g)0==l.ctype||4==l.ctype?l.tabs[g]=[s(n,i)]:2==l.ctype||6==l.ctype?l.tabs[g]=[s(n,i),s(n,i+2),s(n,i+4)]:3==l.ctype&&(l.tabs[g]=n[i]);else if("IEND"==g){var z;if(0!=f)(z=l.frames[l.frames.length-1]).data=t.decode._decompress(l,a.slice(0,f),z.rect.width,z.rect.height),f=0;l.data=t.decode._decompress(l,h,l.width,l.height);break}i+=c,r.readUint(n,i),i+=4}return delete l.compress,delete l.interlace,delete l.filter,l},t.decode._decompress=function(e,a,n,i){return 0==e.compress&&(a=t.decode._inflate(a)),0==e.interlace?a=t.decode._filterZero(a,e,0,n,i):1==e.interlace&&(a=t.decode._readInterlace(a,e)),a},t.decode._inflate=function(t){return e.inflate(t)},t.decode._readInterlace=function(e,a){for(var n=a.width,i=a.height,r=t.decode._getBPP(a),s=r>>3,o=Math.ceil(n*r/8),l=new Uint8Array(i*o),h=0,d=[0,0,4,0,2,0,1],f=[0,4,0,2,0,1,0],_=[8,8,8,4,4,2,2],u=[8,8,4,4,2,2,1],c=0;c<7;){for(var g=_[c],w=u[c],b=0,p=0,m=d[c];m<i;)m+=g,p++;for(var v=f[c];v<n;)v+=w,b++;var k=Math.ceil(b*r/8);t.decode._filterZero(e,a,h,b,p);for(var y=0,x=d[c];x<i;){for(var z=f[c],A=h+y*k<<3;z<n;){var E;if(1==r)E=(E=e[A>>3])>>7-(7&A)&1,l[x*o+(z>>3)]|=E<<7-((3&z)<<0);if(2==r)E=(E=e[A>>3])>>6-(7&A)&3,l[x*o+(z>>2)]|=E<<6-((3&z)<<1);if(4==r)E=(E=e[A>>3])>>4-(7&A)&15,l[x*o+(z>>1)]|=E<<4-((1&z)<<2);if(r>=8)for(var U=x*o+z*s,S=0;S<s;S++)l[U+S]=e[(A>>3)+S];A+=r,z+=w}y++,x+=g}b*p!=0&&(h+=p*(1+k)),c+=1}return l},t.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},t.decode._filterZero=function(e,a,n,i,r){var s=t.decode._getBPP(a),o=Math.ceil(i*s/8),l=t.decode._paeth;s=Math.ceil(s/8);for(var h=0;h<r;h++){var d=n+h*o,f=d+h+1,_=e[f-1];if(0==_)for(var u=0;u<o;u++)e[d+u]=e[f+u];else if(1==_){for(u=0;u<s;u++)e[d+u]=e[f+u];for(u=s;u<o;u++)e[d+u]=e[f+u]+e[d+u-s]&255}else if(0==h){for(u=0;u<s;u++)e[d+u]=e[f+u];if(2==_)for(u=s;u<o;u++)e[d+u]=255&e[f+u];if(3==_)for(u=s;u<o;u++)e[d+u]=e[f+u]+(e[d+u-s]>>1)&255;if(4==_)for(u=s;u<o;u++)e[d+u]=e[f+u]+l(e[d+u-s],0,0)&255}else{if(2==_)for(u=0;u<o;u++)e[d+u]=e[f+u]+e[d+u-o]&255;if(3==_){for(u=0;u<s;u++)e[d+u]=e[f+u]+(e[d+u-o]>>1)&255;for(u=s;u<o;u++)e[d+u]=e[f+u]+(e[d+u-o]+e[d+u-s]>>1)&255}if(4==_){for(u=0;u<s;u++)e[d+u]=e[f+u]+l(0,e[d+u-o],0)&255;for(u=s;u<o;u++)e[d+u]=e[f+u]+l(e[d+u-s],e[d+u-o],e[d+u-s-o])&255}}}return e},t.decode._paeth=function(t,e,a){var n=t+e-a,i=Math.abs(n-t),r=Math.abs(n-e),s=Math.abs(n-a);return i<=r&&i<=s?t:r<=s?e:a},t.decode._IHDR=function(e,a,n){var i=t._bin;n.width=i.readUint(e,a),a+=4,n.height=i.readUint(e,a),a+=4,n.depth=e[a],a++,n.ctype=e[a],a++,n.compress=e[a],a++,n.filter=e[a],a++,n.interlace=e[a],a++},t._bin={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,a){t[e]=a>>8&255,t[e+1]=255&a},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,a){t[e]=a>>24&255,t[e+1]=a>>16&255,t[e+2]=a>>8&255,t[e+3]=255&a},readASCII:function(t,e,a){for(var n="",i=0;i<a;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,a){for(var n=0;n<a.length;n++)t[e+n]=a.charCodeAt(n)},readBytes:function(t,e,a){for(var n=[],i=0;i<a;i++)n.push(t[e+i]);return n},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(e,a,n){for(var i,r="",s=0;s<n;s++)r+="%"+t._bin.pad(e[a+s].toString(16));try{i=decodeURIComponent(r)}catch(i){return t._bin.readASCII(e,a,n)}return i}},t._copyTile=function(t,e,a,n,i,r,s,o,l){for(var h=Math.min(e,i),d=Math.min(a,r),f=0,_=0,u=0;u<d;u++)for(var c=0;c<h;c++)if(s>=0&&o>=0?(f=u*e+c<<2,_=(o+u)*i+s+c<<2):(f=(-o+u)*e-s+c<<2,_=u*i+c<<2),0==l)n[_]=t[f],n[_+1]=t[f+1],n[_+2]=t[f+2],n[_+3]=t[f+3];else if(1==l){var g=t[f+3]*(1/255),w=t[f]*g,b=t[f+1]*g,p=t[f+2]*g,m=n[_+3]*(1/255),v=n[_]*m,k=n[_+1]*m,y=n[_+2]*m,x=1-g,z=g+m*x,A=0==z?0:1/z;n[_+3]=255*z,n[_+0]=(w+v*x)*A,n[_+1]=(b+k*x)*A,n[_+2]=(p+y*x)*A}else if(2==l){g=t[f+3],w=t[f],b=t[f+1],p=t[f+2],m=n[_+3],v=n[_],k=n[_+1],y=n[_+2];g==m&&w==v&&b==k&&p==y?(n[_]=0,n[_+1]=0,n[_+2]=0,n[_+3]=0):(n[_]=w,n[_+1]=b,n[_+2]=p,n[_+3]=g)}else if(3==l){g=t[f+3],w=t[f],b=t[f+1],p=t[f+2],m=n[_+3],v=n[_],k=n[_+1],y=n[_+2];if(g==m&&w==v&&b==k&&p==y)continue;if(g<220&&m>20)return!1}return!0},t.encode=function(e,a,n,i,r,s){null==i&&(i=0),null==s&&(s=!1);for(var o=new Uint8Array(e[0].byteLength*e.length+100),l=[137,80,78,71,13,10,26,10],h=0;h<8;h++)o[h]=l[h];var d=8,f=t._bin,_=t.crc.crc,u=f.writeUint,c=f.writeUshort,g=f.writeASCII,w=t.encode.compressPNG(e,a,n,i,s);u(o,d,13),g(o,d+=4,"IHDR"),u(o,d+=4,a),u(o,d+=4,n),o[d+=4]=w.depth,o[++d]=w.ctype,o[++d]=0,o[++d]=0,o[++d]=0,u(o,++d,_(o,d-17,17)),u(o,d+=4,1),g(o,d+=4,"sRGB"),o[d+=4]=1,u(o,++d,_(o,d-5,5)),d+=4;var b=e.length>1;if(b&&(u(o,d,8),g(o,d+=4,"acTL"),u(o,d+=4,e.length),u(o,d+=4,0),u(o,d+=4,_(o,d-12,12)),d+=4),3==w.ctype){u(o,d,3*(E=w.plte.length)),g(o,d+=4,"PLTE"),d+=4;for(h=0;h<E;h++){var p=3*h,m=w.plte[h],v=255&m,k=m>>8&255,y=m>>16&255;o[d+p+0]=v,o[d+p+1]=k,o[d+p+2]=y}if(u(o,d+=3*E,_(o,d-3*E-4,3*E+4)),d+=4,w.gotAlpha){u(o,d,E),g(o,d+=4,"tRNS"),d+=4;for(h=0;h<E;h++)o[d+h]=w.plte[h]>>24&255;u(o,d+=E,_(o,d-E-4,E+4)),d+=4}}for(var x=0,z=0;z<w.frames.length;z++){var A=w.frames[z];b&&(u(o,d,26),g(o,d+=4,"fcTL"),u(o,d+=4,x++),u(o,d+=4,A.rect.width),u(o,d+=4,A.rect.height),u(o,d+=4,A.rect.x),u(o,d+=4,A.rect.y),c(o,d+=4,r[z]),c(o,d+=2,1e3),o[d+=2]=A.dispose,o[++d]=A.blend,u(o,++d,_(o,d-30,30)),d+=4);var E,U=A.cimg;u(o,d,(E=U.length)+(0==z?0:4));var S=d+=4;g(o,d,0==z?"IDAT":"fdAT"),d+=4,0!=z&&(u(o,d,x++),d+=4);for(h=0;h<E;h++)o[d+h]=U[h];u(o,d+=E,_(o,S,d-S)),d+=4}return u(o,d,0),g(o,d+=4,"IEND"),u(o,d+=4,_(o,d-4,4)),d+=4,o.buffer.slice(0,d)},t.encode.compressPNG=function(e,a,n,i,r){for(var s=t.encode.compress(e,a,n,i,!1,r),o=0;o<e.length;o++){var l=s.frames[o];l.rect.width;var h=l.rect.height,d=l.bpl,f=l.bpp,_=new Uint8Array(h*d+h);l.cimg=t.encode._filterZero(l.img,h,f,d,_)}return s},t.encode.compress=function(e,a,n,i,r,s){null==s&&(s=!1);for(var o=6,l=8,h=4,d=255,f=0;f<e.length;f++)for(var _=new Uint8Array(e[f]),u=_.length,c=0;c<u;c+=4)d&=_[c+3];var g=255!=d,w={},b=[];if(0!=e.length&&(w[0]=0,b.push(0),0!=i&&i--),0!=i){var p=t.quantize(e,i,r);e=p.bufs;for(c=0;c<p.plte.length;c++){null==w[v=p.plte[c].est.rgba]&&(w[v]=b.length,b.push(v))}}else for(f=0;f<e.length;f++){var m=new Uint32Array(e[f]);for(u=m.length,c=0;c<u;c++){var v=m[c];if((c<a||v!=m[c-1]&&v!=m[c-a])&&null==w[v]&&(w[v]=b.length,b.push(v),b.length>=300))break}}var k=!!g&&r,y=b.length;y<=256&&0==s&&(l=y<=2?1:y<=4?2:y<=16?4:8,r&&(l=8),g=!0);var x=[];for(f=0;f<e.length;f++){var z=new Uint8Array(e[f]),A=new Uint32Array(z.buffer),E=0,U=0,S=a,R=n,Z=0;if(0!=f&&!k){for(var B=r||1==f||2==x[x.length-2].dispose?1:2,D=0,I=1e9,T=0;T<B;T++){for(var N=new Uint8Array(e[f-1-T]),L=new Uint32Array(e[f-1-T]),O=a,C=n,F=-1,M=-1,H=0;H<n;H++)for(var P=0;P<a;P++){A[c=H*a+P]!=L[c]&&(P<O&&(O=P),P>F&&(F=P),H<C&&(C=H),H>M&&(M=H))}var j=-1==F?1:(F-O+1)*(M-C+1);j<I&&(I=j,D=T,-1==F?(E=U=0,S=R=1):(E=O,U=C,S=F-O+1,R=M-C+1))}N=new Uint8Array(e[f-1-D]);1==D&&(x[x.length-1].dispose=2);var q=new Uint8Array(S*R*4);new Uint32Array(q.buffer),t._copyTile(N,a,n,q,S,R,-E,-U,0),t._copyTile(z,a,n,q,S,R,-E,-U,3)?(t._copyTile(z,a,n,q,S,R,-E,-U,2),Z=1):(t._copyTile(z,a,n,q,S,R,-E,-U,0),Z=0),z=q,A=new Uint32Array(z.buffer)}var K=4*S;if(y<=256&&0==s){K=Math.ceil(l*S/8);for(q=new Uint8Array(K*R),H=0;H<R;H++){c=H*K;var G=H*S;if(8==l)for(P=0;P<S;P++)q[c+P]=w[A[G+P]];else if(4==l)for(P=0;P<S;P++)q[c+(P>>1)]|=w[A[G+P]]<<4-4*(1&P);else if(2==l)for(P=0;P<S;P++)q[c+(P>>2)]|=w[A[G+P]]<<6-2*(3&P);else if(1==l)for(P=0;P<S;P++)q[c+(P>>3)]|=w[A[G+P]]<<7-1*(7&P)}z=q,o=3,h=1}else if(0==g&&1==e.length){q=new Uint8Array(S*R*3);var Y=S*R;for(c=0;c<Y;c++){var X=3*c,$=4*c;q[X]=z[$],q[X+1]=z[$+1],q[X+2]=z[$+2]}z=q,o=2,h=3,K=3*S}x.push({rect:{x:E,y:U,width:S,height:R},img:z,bpl:K,bpp:h,blend:Z,dispose:k?1:0})}return{ctype:o,depth:l,plte:b,gotAlpha:g,frames:x}},t.encode._filterZero=function(a,n,i,r,s){for(var o=[],l=0;l<5;l++)if(!(n*r>5e5)||2!=l&&3!=l&&4!=l){for(var h=0;h<n;h++)t.encode._filterLine(s,a,h,r,i,l);if(o.push(e.deflate(s)),1==i)break}for(var d,f=1e9,_=0;_<o.length;_++)o[_].length<f&&(d=_,f=o[_].length);return o[d]},t.encode._filterLine=function(e,a,n,i,r,s){var o=n*i,l=o+n,h=t.decode._paeth;if(e[l]=s,l++,0==s)for(var d=0;d<i;d++)e[l+d]=a[o+d];else if(1==s){for(d=0;d<r;d++)e[l+d]=a[o+d];for(d=r;d<i;d++)e[l+d]=a[o+d]-a[o+d-r]+256&255}else if(0==n){for(d=0;d<r;d++)e[l+d]=a[o+d];if(2==s)for(d=r;d<i;d++)e[l+d]=a[o+d];if(3==s)for(d=r;d<i;d++)e[l+d]=a[o+d]-(a[o+d-r]>>1)+256&255;if(4==s)for(d=r;d<i;d++)e[l+d]=a[o+d]-h(a[o+d-r],0,0)+256&255}else{if(2==s)for(d=0;d<i;d++)e[l+d]=a[o+d]+256-a[o+d-i]&255;if(3==s){for(d=0;d<r;d++)e[l+d]=a[o+d]+256-(a[o+d-i]>>1)&255;for(d=r;d<i;d++)e[l+d]=a[o+d]+256-(a[o+d-i]+a[o+d-r]>>1)&255}if(4==s){for(d=0;d<r;d++)e[l+d]=a[o+d]+256-h(0,a[o+d-i],0)&255;for(d=r;d<i;d++)e[l+d]=a[o+d]+256-h(a[o+d-r],a[o+d-i],a[o+d-r-i])&255}}},t.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var a=e,n=0;n<8;n++)1&a?a=3988292384^a>>>1:a>>>=1;t[e]=a}return t}(),update:function(e,a,n,i){for(var r=0;r<i;r++)e=t.crc.table[255&(e^a[n+r])]^e>>>8;return e},crc:function(e,a,n){return 4294967295^t.crc.update(4294967295,e,a,n)}},t.quantize=function(e,a,n){for(var i=[],r=0,s=0;s<e.length;s++)i.push(t.encode.alphaMul(new Uint8Array(e[s]),n)),r+=e[s].byteLength;var o=new Uint8Array(r),l=new Uint32Array(o.buffer),h=0;for(s=0;s<i.length;s++){for(var d=i[s],f=d.length,_=0;_<f;_++)o[h+_]=d[_];h+=f}var u={i0:0,i1:o.length,bst:null,est:null,tdst:0,left:null,right:null};u.bst=t.quantize.stats(o,u.i0,u.i1),u.est=t.quantize.estats(u.bst);for(var c=[u];c.length<a;){var g=0,w=0;for(s=0;s<c.length;s++)c[s].est.L>g&&(g=c[s].est.L,w=s);if(g<.001)break;var b=c[w],p=t.quantize.splitPixels(o,l,b.i0,b.i1,b.est.e,b.est.eMq255),m={i0:b.i0,i1:p,bst:null,est:null,tdst:0,left:null,right:null};m.bst=t.quantize.stats(o,m.i0,m.i1),m.est=t.quantize.estats(m.bst);var v={i0:p,i1:b.i1,bst:null,est:null,tdst:0,left:null,right:null};v.bst={R:[],m:[],N:b.bst.N-m.bst.N};for(s=0;s<16;s++)v.bst.R[s]=b.bst.R[s]-m.bst.R[s];for(s=0;s<4;s++)v.bst.m[s]=b.bst.m[s]-m.bst.m[s];v.est=t.quantize.estats(v.bst),b.left=m,b.right=v,c[w]=m,c.push(v)}c.sort((function(t,e){return e.bst.N-t.bst.N}));for(var k=0;k<i.length;k++){var y=t.quantize.planeDst,x=new Uint8Array(i[k].buffer),z=new Uint32Array(i[k].buffer),A=x.length;for(s=0;s<A;s+=4){for(var E=x[s]*(1/255),U=x[s+1]*(1/255),S=x[s+2]*(1/255),R=x[s+3]*(1/255),Z=u;Z.left;)Z=y(Z.est,E,U,S,R)<=0?Z.left:Z.right;z[s>>2]=Z.est.rgba}i[k]=z.buffer}return{bufs:i,plte:c}},t.quantize.getNearest=function(e,a,n,i,r){if(null==e.left)return e.tdst=t.quantize.dist(e.est.q,a,n,i,r),e;var s=t.quantize.planeDst(e.est,a,n,i,r),o=e.left,l=e.right;s>0&&(o=e.right,l=e.left);var h=t.quantize.getNearest(o,a,n,i,r);if(h.tdst<=s*s)return h;var d=t.quantize.getNearest(l,a,n,i,r);return d.tdst<h.tdst?d:h},t.quantize.planeDst=function(t,e,a,n,i){var r=t.e;return r[0]*e+r[1]*a+r[2]*n+r[3]*i-t.eMq},t.quantize.dist=function(t,e,a,n,i){var r=e-t[0],s=a-t[1],o=n-t[2],l=i-t[3];return r*r+s*s+o*o+l*l},t.quantize.splitPixels=function(e,a,n,i,r,s){var o=t.quantize.vecDot;for(i-=4;n<i;){for(;o(e,n,r)<=s;)n+=4;for(;o(e,i,r)>s;)i-=4;if(n>=i)break;var l=a[n>>2];a[n>>2]=a[i>>2],a[i>>2]=l,n+=4,i-=4}for(;o(e,n,r)>s;)n-=4;return n+4},t.quantize.vecDot=function(t,e,a){return t[e]*a[0]+t[e+1]*a[1]+t[e+2]*a[2]+t[e+3]*a[3]},t.quantize.stats=function(t,e,a){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],r=a-e>>2,s=e;s<a;s+=4){var o=t[s]*(1/255),l=t[s+1]*(1/255),h=t[s+2]*(1/255),d=t[s+3]*(1/255);i[0]+=o,i[1]+=l,i[2]+=h,i[3]+=d,n[0]+=o*o,n[1]+=o*l,n[2]+=o*h,n[3]+=o*d,n[5]+=l*l,n[6]+=l*h,n[7]+=l*d,n[10]+=h*h,n[11]+=h*d,n[15]+=d*d}return n[4]=n[1],n[8]=n[2],n[12]=n[3],n[9]=n[6],n[13]=n[7],n[14]=n[11],{R:n,m:i,N:r}},t.quantize.estats=function(e){var a=e.R,n=e.m,i=e.N,r=n[0],s=n[1],o=n[2],l=n[3],h=0==i?0:1/i,d=[a[0]-r*r*h,a[1]-r*s*h,a[2]-r*o*h,a[3]-r*l*h,a[4]-s*r*h,a[5]-s*s*h,a[6]-s*o*h,a[7]-s*l*h,a[8]-o*r*h,a[9]-o*s*h,a[10]-o*o*h,a[11]-o*l*h,a[12]-l*r*h,a[13]-l*s*h,a[14]-l*o*h,a[15]-l*l*h],f=d,_=t.M4,u=[.5,.5,.5,.5],c=0,g=0;if(0!=i)for(var w=0;w<10&&(u=_.multVec(f,u),g=Math.sqrt(_.dot(u,u)),u=_.sml(1/g,u),!(Math.abs(g-c)<1e-9));w++)c=g;var b=[r*h,s*h,o*h,l*h],p=_.dot(_.sml(255,b),u),m=b[3]<.001?0:1/b[3];return{Cov:d,q:b,e:u,L:c,eMq255:p,eMq:_.dot(u,b),rgba:(Math.round(255*b[3])<<24|Math.round(255*b[2]*m)<<16|Math.round(255*b[1]*m)<<8|Math.round(255*b[0]*m)<<0)>>>0}},t.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},t.encode.alphaMul=function(t,e){for(var a=new Uint8Array(t.length),n=t.length>>2,i=0;i<n;i++){var r=i<<2,s=t[r+3];e&&(s=s<128?0:255);var o=s*(1/255);a[r+0]=t[r+0]*o,a[r+1]=t[r+1]*o,a[r+2]=t[r+2]*o,a[r+3]=s}return a}}(e,Ni)}()}));const{defineFileType:Oi}=r,{defineDEFGroup:Ci}=r;function Fi(t,{palette:e,legacy:n,selection:i,format:r,padding:s}){const o=t.uint32(),l=t.uint32(),h=t.uint32(),d=t.uint32();let f,_,u,c;n?(f=h,_=d,u=0,c=0):(f=t.uint32(),_=t.uint32(),u=t.uint32(),c=t.uint32());const g=[],w=t.at,b={r:255,g:255,b:0};if(0===l&&g.push(...t.loop(o,t.uint8)),1===l){const e=t.loop(_,t.uint32);for(const a of e){t.seek(w+a);let e=f;do{const a=t.uint8(),n=t.uint8()+1;g.push(...t.loop(n,255===a?t.uint8:a)),e-=n}while(e)}}else if(2===l){const e=t.loop(_,t.uint16);t.skip(2);for(const a of e){t.seek(w+a);let e=f;do{const a=t.uint8(),n=a>>5,i=1+(31&a);g.push(...t.loop(i,7===n?t.uint8:n)),e-=i}while(e)}}else if(3===l){const e=t.loop(_*f/32,t.uint16);for(const a of e){t.seek(w+a);let e=32;do{const a=t.uint8(),n=a>>5,i=1+(31&a);g.push(...t.loop(i,7===n?t.uint8:n)),e-=i}while(e)}}const p={width:f,height:_,x:u,y:c};if(s){let t;t=new a(h*d*4);for(let a=0;a<_;a++){t.seek(4*((c+a)*h+u));for(let n=0;n<f;n++){const i=g[a*f+n],{r:r,g:s,b:o,a:l=255}=e[i];t.setuint8(r,s,o,l)}}if(p.data="bitmap"===r?t.buffer:Li.encode([t.buffer],h,d,0),!i||!g.includes(5))return p;t=new a(h*d*4);for(let a=0;a<_;a++){t.seek(4*((c+a)*h+u));for(let n=0;n<f;n++){const i=g[a*f+n],{r:r,g:s,b:o,a:l=255}=5===i||6===i||7===i?b:e[0];t.setuint8(r,s,o,l)}}p.selection="bitmap"===r?t.buffer:Li.encode([t.buffer],h,d,0)}else{let t;t=new a(f*_*4);for(const a of g){const{r:n,g:i,b:r,a:s=255}=e[a];t.setuint8(n,i,r,s)}if(p.data="bitmap"===r?t.buffer:Li.encode([t.buffer],f,_,0),!i||!g.includes(5))return p;t=new a(f*_*4);for(const a of g){const{r:n,g:i,b:r,a:s=255}=5===a||6===a||7===a?b:e[0];t.setuint8(n,i,r,s)}p.selection="bitmap"===r?t.buffer:Li.encode([t.buffer],f,_,0)}return p}var Mi=function(t,e={}){if(t instanceof a||(t=new a(t)),void 0===e.format&&(e.format="png"),void 0===e.padding&&(e.padding=!1),void 0===e.palette&&(e.palette=t=>t),"png"!==e.format&&"bitmap"!==e.format)throw new Error("DEF output format not supported.");if(!0!==e.padding&&!1!==e.padding)throw new Error("Padding must be a boolean.");if("function"!=typeof e.palette)throw new Error("Palette must be a function.");const n=Oi(t.uint32()),i=t.uint32(),r=t.uint32(),s=t.uint32();let o=t.loop(256,(()=>({r:t.uint8(),g:t.uint8(),b:t.uint8(),a:255})));o[0]={r:0,g:0,b:0,a:0},o[1]={r:0,g:0,b:0,a:64},o[4]={r:0,g:0,b:0,a:128},o[5]={r:0,g:0,b:0,a:0},o[6]={r:0,g:0,b:0,a:128},o[7]={r:0,g:0,b:0,a:64},o=e.palette(o),e.palette=o;const l={},h={};for(let i=0;i<s;i++){const i=Ci(n,t.uint32());e.selection="mouse over"===i||"standing"===i;const r=t.uint32();t.skip(8);const s=t.loop(r,(()=>t.string(13).replace(/\0.*$/,""))),o=t.loop(r,t.uint32),{at:d}=t,f=o.map((e=>(t.seek(e),t.uint32()+32)));t.seek(d),e.legacy=f.some(((e,a)=>e+o[a]>t.length)),l[i]=t.loop(r,(n=>{const i=s[n],r=o[n],l=f[n];return(!h[i]||e.selection&&!h[i].selection)&&(h[i]=Fi(new a(t,r,l),e)),i}))}return{type:n,fullWidth:i,fullHeight:r,palette:o,groups:l,images:h}};const{defineFileType:Hi}=r;var Pi={unpackLOD:Ua,unpackDEF:Mi,unpackPCX:function(t,{format:e="png",transparency:n=[{r:0,g:255,b:255},{r:255,g:0,b:255},{r:0,g:0,b:0}]}={}){if(t instanceof a||(t=new a(t)),"png"!==e&&"bitmap"!==e)throw new Error("PCX output format not supported.");if(!Array.isArray(n)||n.some((({r:t,g:e,b:a})=>t<0||t>255||e<0||e>255||a<0||a>255)))throw new Error("Transparency must be an array of {r, g, b} values in 0-255 range.");let i;const r=t.uint32(),s=t.uint32(),o=t.uint32(),l=s*o,h=new a(4*l);if(l===r){i=Hi(16);const e=t.loop(l,t.uint8),a=t.loop(256,(()=>({r:t.uint8(),g:t.uint8(),b:t.uint8()}))),[r]=a;n.some((({r:t,g:e,b:a})=>t===r.r&&e===r.g&&a===r.b))&&(a[0]={r:0,g:0,b:0,a:0});for(const t of e){const{r:e,g:n,b:i,a:r=255}=a[t];h.setuint8(e,n,i,r)}}else{if(3*l!==r)throw new Error("Image size mismatch.");i=Hi(17);for(let e=0;e<l;e++){const e=t.uint8(),a=t.uint8(),n=t.uint8();h.setuint8(n,a,e,255)}}return{type:i,width:s,height:o,data:"bitmap"===e?h.buffer:Li.encode([h.buffer],s,o,0)}}},ji=Pi.unpackLOD,qi=Pi.unpackDEF,Ki=Pi.unpackPCX;t.default=Pi,t.unpackDEF=qi,t.unpackLOD=ji,t.unpackPCX=Ki,Object.defineProperty(t,"__esModule",{value:!0})}(this["homm3-unpacker"]=this["homm3-unpacker"]||{});
